# 能力声明

## 概述

能力声明定义了 Skill 的输入输出和前置条件，让 Agent 能够理解如何正确使用 Skill。

## 能力声明结构

在 SKILL.md 的 Context Entry 章节中声明能力：

```markdown
## Context Entry

### Capabilities（能力声明）

#### 输入
| 名称 | 类型 | 必需 | 说明 |
|------|------|------|------|
| 需求描述 | 自然语言 | 是 | 要开发的组件需求 |
| 项目上下文 | Memory-bank | 否 | 项目特定信息 |

#### 输出
| 名称 | 类型 | 说明 |
|------|------|------|
| 组件代码 | Verse 文件 | 符合规范的组件代码 |
| 架构文档 | Markdown | 组件设计说明 |

#### 前置条件
- 已加载 Verse API Digest
- 已确定架构模式（或使用默认模式）
```

## 输入声明

### 输入类型

| 类型 | 说明 | 示例 |
|------|------|------|
| 自然语言 | 用户的文字描述 | "创建一个钓鱼组件" |
| Memory-bank | 项目上下文文件 | `@architecture-blueprint.md` |
| Skill 输出 | 其他 Skill 的产出 | 架构选择结果 |
| 文件 | 已有的代码或文档 | 现有组件代码 |
| 配置 | 参数或选项 | 组件配置项 |

### 声明格式

```markdown
#### 输入

| 名称 | 类型 | 必需 | 来源 | 说明 |
|------|------|------|------|------|
| 组件需求 | 自然语言 | 是 | 用户 | 详细的组件需求描述 |
| 架构蓝图 | Memory-bank | 是 | Memory-bank | @architecture-blueprint.md |
| 代码规范 | Skill 输出 | 否 | verseCodeStandard | 项目代码规范 |
```

### 必需 vs 可选

- **必需输入**：没有则无法执行
- **可选输入**：有则使用，无则使用默认值或跳过

```markdown
#### 输入

**必需**：
- 组件需求：详细描述要创建的组件

**可选**：
- 参考组件：可参考的已有组件
- 特定约束：额外的限制条件
```

## 输出声明

### 输出类型

| 类型 | 说明 | 示例 |
|------|------|------|
| 代码 | 程序代码文件 | `.verse` 文件 |
| 文档 | Markdown 文档 | 设计文档、说明文档 |
| 数据 | 结构化数据 | JSON/YAML 配置 |
| 决策 | 选择结果 | 架构模式选择 |
| 报告 | 分析报告 | 审计报告 |

### 声明格式

```markdown
#### 输出

| 名称 | 类型 | 格式 | 说明 |
|------|------|------|------|
| 组件代码 | 代码 | Verse | 完整的组件实现 |
| 设计文档 | 文档 | Markdown | 组件设计说明 |
| 测试计划 | 文档 | Markdown | 测试要点（可选） |
```

### 输出保证

声明输出的质量保证：

```markdown
#### 输出保证

- 代码符合 Verse 语法
- 代码符合 SceneGraph 架构规范
- 文档包含完整的接口说明
- 无 TODO 占位符（除非明确标注）
```

## 前置条件

### 条件类型

| 类型 | 说明 | 示例 |
|------|------|------|
| 上下文依赖 | 需要先加载的上下文 | API Digest |
| Skill 依赖 | 需要先执行的 Skill | 架构选择 |
| 环境依赖 | 需要的运行环境 | UEFN 项目已存在 |
| 状态依赖 | 需要的系统状态 | Memory-bank 已初始化 |

### 声明格式

```markdown
#### 前置条件

**必须满足**：
- [ ] 已加载 `verseDev/shared/api-digests/Verse.digest.md`
- [ ] Memory-bank 的 `@architecture-blueprint.md` 已存在
- [ ] 目标项目的 Verse 代码目录已确定

**建议满足**：
- [ ] 已阅读 SceneGraph 框架指南
- [ ] 已有类似组件可参考
```

### 条件检查

Agent 可以按照前置条件清单进行检查：

```markdown
#### 条件检查流程

1. 检查必须条件
   - 如果不满足，提示用户或自动加载
   - 如果无法满足，中止执行

2. 检查建议条件
   - 如果不满足，发出警告
   - 继续执行但可能影响质量
```

## 完整示例

```markdown
## Context Entry

### Capabilities

#### 核心能力

| 能力 | 说明 |
|------|------|
| 组件设计 | 根据需求设计组件结构 |
| 代码生成 | 生成符合规范的 Verse 代码 |
| 文档编写 | 生成组件设计文档 |

#### 输入

| 名称 | 类型 | 必需 | 来源 | 说明 |
|------|------|------|------|------|
| 组件需求 | 自然语言 | 是 | 用户 | 详细的组件需求描述 |
| 架构蓝图 | Memory-bank | 是 | Memory-bank | 项目架构设计 |
| API 参考 | 外部资源 | 否 | shared/api-digests | 按需查询 |

#### 输出

| 名称 | 类型 | 格式 | 位置 |
|------|------|------|------|
| 组件代码 | 代码 | Verse | 项目代码目录 |
| 设计文档 | 文档 | Markdown | Memory-bank 或 docs/ |

#### 前置条件

**必须**：
1. Memory-bank 已初始化
2. 架构蓝图已确定
3. 目标代码目录已知

**建议**：
1. 已阅读相关 API 文档
2. 了解现有组件结构

#### 后置效果

执行此 Skill 后：
1. 新组件代码文件已创建
2. Memory-bank 的 @code-library.md 已更新
3. 可能需要运行 verseCodeAuditor 进行审计
```

## 能力边界

### 明确边界

声明 Skill 不能做什么：

```markdown
### 能力边界

此 Skill **不负责**：
- 运行时调试（使用 verseDebugger）
- 性能优化（使用 verseOptimizer）
- 网络同步（超出当前能力范围）

此 Skill **不保证**：
- 代码一定能编译（需要 UEFN 验证）
- 满足所有边缘情况
```

### 失败模式

声明可能的失败情况：

```markdown
### 可能的失败模式

| 失败模式 | 原因 | 处理方式 |
|----------|------|----------|
| 需求不清 | 输入描述模糊 | 请求澄清 |
| API 缺失 | 需要的 API 不存在 | 记录到 @api-gaps.md |
| 冲突 | 与现有架构冲突 | 提供替代方案 |
```

---

**相关文档**：
- [接口契约](接口契约.md)
- [执行协议](执行协议.md)
- [章节模板](../基础规范/章节模板.md)
