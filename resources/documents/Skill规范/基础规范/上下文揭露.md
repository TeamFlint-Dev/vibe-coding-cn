# 上下文揭露

## 核心原则

上下文揭露是 Skill 的核心职责：

> **以最高效的方法，揭示目标上下文。**

这意味着：

- 让 Agent 快速找到需要的信息
- 让 Agent 快速判断是否需要深入
- 让 Agent 快速理解如何使用

## 揭露的三个维度

### 1. 自我揭露

通过 Frontmatter 和 When to Use 章节，让 Agent 快速判断"我是否需要这个 Skill"。

**关键元素**：

- `description`：包含触发条件的描述
- When to Use：详细的适用场景
- Boundaries：明确不适用的场景

### 2. 能力揭露

通过 Context Entry 章节，声明"我能提供什么上下文"。

**关键元素**：

- 提供的上下文列表
- 每个上下文的入口文件
- 使用场景说明

### 3. 入口揭露

通过链接和路径，告诉 Agent"如何访问具体内容"。

**关键元素**：

- 子 Skill 链接
- 外部资源链接
- 相关 Skill 链接

## 入口设计模式

### 模式一：直接入口

直接提供文件路径：

```markdown
### 本 Skill 提供的上下文

| 能力 | 入口 |
|------|------|
| Verse API 参考 | [Verse.digest.md](api-digests/Verse.digest.md) |
| 架构模式 | [architecture-library.md](architecture-library.md) |
```

### 模式二：条件入口

根据条件指向不同入口：

```markdown
### 选择指引

根据你的需求选择：

| 需求 | 入口 |
|------|------|
| 需要创建新组件 | [verseComponent](verseComponent/SKILL.md) |
| 需要设计事件流 | [verseEventFlow](verseEventFlow/SKILL.md) |
| 需要编写 Helper | [verseHelpers](verseHelpers/SKILL.md) |
```

### 模式三：层级入口

先提供索引，再指向具体内容：

```markdown
### 代码资产

1. 先查阅索引：[@code-library-index.md](@code-library-index.md)
2. 根据索引定位具体文件

索引按类型组织：
- `Components/` - 组件代码
- `Helpers/` - 工具函数
- `Events/` - 事件定义
```

### 模式四：搜索入口

指导 Agent 如何搜索：

```markdown
### API 查询

API Digest 文件较大，建议按需搜索：

1. 确定要查询的 API 类型（Verse/Fortnite/UnrealEngine）
2. 在对应文件中搜索关键词
3. 阅读相关章节

**搜索示例**：
- 查找 `spawner` 相关 API → 搜索 `Fortnite.digest.md`
- 查找 `array` 操作 → 搜索 `Verse.digest.md`
```

## 链接书写规范

### 相对路径优先

```markdown
✅ [子 Skill](childSkill/SKILL.md)
✅ [外部资源](../shared/resource.md)
✅ [同级文件](./sibling.md)

❌ [绝对路径](/Core/skills/verseDev/...)
```

### 有意义的链接文本

```markdown
✅ 参考 [组件开发规范](verseComponent/SKILL.md) 进行开发
✅ 查阅 [Verse API 速查表](api-digests/Verse.digest.md)

❌ 点击 [这里](verseComponent/SKILL.md)
❌ 详见 [链接](api-digests/Verse.digest.md)
```

### 链接分组

将相关链接组织在一起：

```markdown
### 开发类 Skill

- [verseComponent](verseComponent/SKILL.md) - 组件开发
- [verseEventFlow](verseEventFlow/SKILL.md) - 事件流设计
- [verseHelpers](verseHelpers/SKILL.md) - Helper 函数

### 审计类 Skill

- [verseCodeAuditor](verseCodeAuditor/SKILL.md) - 代码审计
- [verseArchitectureAuditor](verseArchitectureAuditor/SKILL.md) - 架构审计
```

## 逆向链接

子节点可以提供回到父节点的链接：

```markdown
## Related Skills

- **父 Skill**: [verseDev](../SKILL.md) - Verse 开发生态
- **同级 Skill**: [verseEventFlow](../verseEventFlow/SKILL.md) - 事件流设计
```

也可以通过 frontmatter 声明：

```yaml
---
name: verseComponent
parent: verseDev
---
```

## 外部资源揭露

### 明确声明外部依赖

```markdown
## Context Entry

### 外部资源

本 Skill 依赖以下外部资源，请确保可访问：

| 资源 | 路径 | 必需/可选 |
|------|------|-----------|
| API Digest | `../shared/api-digests/` | 必需 |
| 架构库 | `../shared/architecture-library.md` | 可选 |
```

### 提供访问方法

```markdown
### 如何访问外部资源

1. **API Digest**
   - 路径：`../shared/api-digests/`
   - 包含：Verse.digest.md, Fortnite.digest.md, UnrealEngine.digest.md
   - 用法：按需搜索关键词

2. **架构库**
   - 路径：`../shared/architecture-library.md`
   - 用法：查找匹配的架构模式 ID
```

## 上下文加载建议

### 声明加载顺序

```markdown
## Context Entry

### 推荐加载顺序

1. 首先加载本 Skill 的 SKILL.md（你正在阅读）
2. 根据任务类型加载对应子 Skill
3. 按需加载 API Digest
4. 按需加载参考资料
```

### 声明必要 vs 可选

```markdown
### 依赖上下文

| 上下文 | 来源 | 级别 | 何时需要 |
|--------|------|------|----------|
| 架构蓝图 | project-docs | 必需 | 始终 |
| API Digest | shared/ | 可选 | 查询 API 时 |
| 代码资产 | code-library/ | 可选 | 需要参考时 |
```

---

**相关文档**：

- [核心理念](核心理念.md)
- [章节模板](章节模板.md)
- [接口契约](../基建规范/接口契约.md)
