# æ ¸å¿ƒæ¦‚å¿µ - è‡ªè¿›åŒ–ç¼–ç æ¡†æ¶

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µæ€»è§ˆ

æœ¬æ¡†æ¶åŸºäº4ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š

1. **ç´¢å¼• (Index)** - æŒ‡å‘çŸ¥è¯†çš„æƒé‡åŒ–æŒ‡é’ˆ
2. **ç‰¹å¾æƒé‡ (Feature Weights)** - ä»£ç è´¨é‡ç‰¹å¾çš„é‡è¦æ€§åˆ†æ•°
3. **æ¸è¿›å¼æŠ«éœ² (Progressive Disclosure)** - æ ¹æ®æƒé‡é€‰æ‹©æ€§å±•ç¤ºä¸Šä¸‹æ–‡
4. **åé¦ˆé©±åŠ¨å­¦ä¹  (Feedback-Driven Learning)** - ä»äº§å‡ºè´¨é‡ä¸­ä¼˜åŒ–ç­–ç•¥

## ğŸ“‡ ä»€ä¹ˆæ˜¯"ç´¢å¼•"ï¼Ÿ

### æ¦‚å¿µå®šä¹‰

**ç´¢å¼•**ä¸æ˜¯ä»£ç ï¼Œè€Œæ˜¯ä¸€ç»„**æƒé‡åŒ–çš„æŒ‡é’ˆ**ï¼Œå‘Šè¯‰ç³»ç»Ÿï¼š"åœ¨å½“å‰ä»»åŠ¡ä¸­ï¼Œåº”è¯¥é‡ç‚¹å…³æ³¨å“ªäº›çŸ¥è¯†"ã€‚

### ç›´è§‚æ¯”å–»

```
å›¾ä¹¦é¦†åœºæ™¯ï¼š
â”œâ”€ Knowledge = å›¾ä¹¦é¦†é‡Œçš„æ‰€æœ‰ä¹¦
â”œâ”€ Index = ä¹¦æ¶å¯¼èˆªæ ‡ç­¾ + æ¨èåº¦æ˜Ÿçº§
â””â”€ Agent = æ¥å€Ÿä¹¦çš„è¯»è€…

æ²¡æœ‰ç´¢å¼•ï¼š
  è¯»è€…éœ€è¦æµè§ˆæ‰€æœ‰ä¹¦æ¶ â†’ ä¿¡æ¯è¿‡è½½ â†’ é€‰ä¸å‡ºæœ€ç›¸å…³çš„ä¹¦

æœ‰ç´¢å¼•ï¼š
  å¯¼èˆªæ ‡ç­¾å‘Šè¯‰è¯»è€…ï¼š"éœ€è¦äº†è§£Xï¼Ÿé‡ç‚¹çœ‹è¿™3æœ¬ä¹¦ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰"
  â†’ ç²¾å‡†è·å– â†’ é«˜æ•ˆå­¦ä¹ 
```

### ç´¢å¼•çš„ä¸‰ç§å½¢å¼

#### 1. ç‰¹å¾æƒé‡ç´¢å¼• (feature-weights.json)

**ç›®çš„**ï¼šå®šä¹‰ä»£ç è´¨é‡çš„å„ä¸ªç»´åº¦çš„é‡è¦æ€§

```json
{
  "zero_coupling": 0.92,      // æœ€é‡è¦
  "modularity": 0.85,         // å¾ˆé‡è¦
  "naming": 0.65,             // ä¸­ç­‰é‡è¦
  "comments": 0.40,           // ä¸å¤ªé‡è¦
  "performance": 0.30         // æš‚æ—¶ä¸é‡è¦
}
```

**è§£è¯»**ï¼š

- `zero_coupling: 0.92` â†’ Producerç”Ÿæˆä»£ç æ—¶ï¼Œä¼˜å…ˆç¡®ä¿é›¶è€¦åˆ
- `comments: 0.40` â†’ æ³¨é‡Šè´¨é‡ç›®å‰ä¸æ˜¯é‡ç‚¹

#### 2. æ¡ˆä¾‹ç´¢å¼• (example-index.json)

**ç›®çš„**ï¼šå¿«é€Ÿå®šä½æœ€ç›¸å…³çš„ä»£ç æ¡ˆä¾‹

```json
{
  "by_feature": {
    "zero_coupling": {
      "excellent": [
        "HealthComponent.verse",
        "AttackSystem.verse",
        "InventoryManager.verse"
      ],
      "average": [
        "OldHealthScript.verse"
      ]
    }
  },
  "by_scenario": {
    "player_combat": [
      "HealthComponent.verse",
      "DamageCalculator.verse"
    ]
  }
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```
éœ€æ±‚ï¼šç”Ÿæˆç©å®¶æˆ˜æ–—ç»„ä»¶
â†“
æŸ¥è¯¢ï¼šby_scenario["player_combat"]
â†“
è¿”å›ï¼šHealthComponent.verse, DamageCalculator.verse
â†“
æŠ«éœ²ï¼šè¿™2ä¸ªä¼˜ç§€æ¡ˆä¾‹ç»™Agent
```

#### 3. æ¨¡å¼ç´¢å¼• (pattern-index.json)

**ç›®çš„**ï¼šè®°å½•è®¾è®¡æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å’Œä¼˜å…ˆçº§

```json
{
  "patterns": {
    "zero_coupling": {
      "file": "patterns/zero-coupling.md",
      "priority": 0.92,
      "applicable_scenarios": [
        "component_design",
        "system_architecture"
      ],
      "references": 15          // è¢«æˆåŠŸåº”ç”¨15æ¬¡
    },
    "event_driven": {
      "file": "patterns/event-driven.md",
      "priority": 0.85,
      "applicable_scenarios": [
        "game_flow",
        "ui_interaction"
      ],
      "references": 12
    }
  }
}
```

**ä½œç”¨**ï¼šå½“å‰åœºæ™¯æ˜¯`component_design`ï¼Œè‡ªåŠ¨æå‡`zero_coupling`æ¨¡å¼çš„ä¼˜å…ˆçº§ã€‚

## âš–ï¸ ä»€ä¹ˆæ˜¯"ç‰¹å¾æƒé‡"ï¼Ÿ

### æ¦‚å¿µå®šä¹‰

**ç‰¹å¾æƒé‡**æ˜¯å¯¹ä»£ç è´¨é‡å„ä¸ªç»´åº¦çš„**é‡è¦æ€§è¯„åˆ†**ï¼ŒèŒƒå›´0-1ã€‚

### å…³é”®ç‰¹å¾åˆ—è¡¨

| ç‰¹å¾ | è¯´æ˜ | æƒé‡èŒƒå›´ | ç¤ºä¾‹ |
|-----|------|---------|------|
| **zero_coupling** | é›¶è€¦åˆè®¾è®¡ | 0.85-0.95 | ç»„ä»¶é—´æ— ç›´æ¥å¼•ç”¨ |
| **modularity** | æ¨¡å—åŒ–ç¨‹åº¦ | 0.75-0.90 | å•ä¸€èŒè´£ï¼Œé«˜å†…èš |
| **naming** | å‘½åè§„èŒƒ | 0.60-0.80 | æ¸…æ™°ã€è¯­ä¹‰åŒ– |
| **error_handling** | é”™è¯¯å¤„ç† | 0.50-0.75 | å®Œå–„çš„å¼‚å¸¸å¤„ç† |
| **testability** | å¯æµ‹è¯•æ€§ | 0.55-0.70 | æ˜“äºå•å…ƒæµ‹è¯• |
| **performance** | æ€§èƒ½ä¼˜åŒ– | 0.30-0.60 | ç®—æ³•æ•ˆç‡ |
| **comments** | æ³¨é‡Šè´¨é‡ | 0.30-0.50 | æ–‡æ¡£å®Œæ•´æ€§ |

### æƒé‡çš„å«ä¹‰

```
0.90-1.0   â†’ æ ¸å¿ƒå…³æ³¨ï¼Œå®Œæ•´æŠ«éœ²
0.75-0.90  â†’ é‡ç‚¹å…³æ³¨ï¼Œè¯¦ç»†æŠ«éœ²
0.50-0.75  â†’ é€‚åº¦å…³æ³¨ï¼Œæ‘˜è¦æŠ«éœ²
0.30-0.50  â†’ è½»åº¦å…³æ³¨ï¼Œä»…æåŠ
0-0.30     â†’ æš‚ä¸å…³æ³¨ï¼Œä¸æŠ«éœ²
```

### æƒé‡å¦‚ä½•å½±å“æŠ«éœ²

**åœºæ™¯**ï¼šç”Ÿæˆä¸€ä¸ª`HealthComponent`

```
ç´¢å¼•é…ç½®ï¼š
{
  "zero_coupling": 0.92,
  "modularity": 0.85,
  "naming": 0.65,
  "comments": 0.40
}

æŠ«éœ²ç­–ç•¥ï¼š
â”œâ”€ zero_coupling (0.92)
â”‚   â”œâ”€ å®Œæ•´æŠ«éœ² patterns/zero-coupling.md (1500å­—)
â”‚   â”œâ”€ æŠ«éœ² 3ä¸ªä¼˜ç§€æ¡ˆä¾‹
â”‚   â””â”€ æŠ«éœ² SceneGraphæ¶æ„æŒ‡å—
â”‚
â”œâ”€ modularity (0.85)
â”‚   â”œâ”€ è¯¦ç»†æŠ«éœ² patterns/component-based.md (800å­—)
â”‚   â””â”€ æŠ«éœ² 2ä¸ªæ¡ˆä¾‹
â”‚
â”œâ”€ naming (0.65)
â”‚   â””â”€ æ‘˜è¦æŠ«éœ² å‘½åè§„èŒƒï¼ˆ200å­—ï¼‰
â”‚
â””â”€ comments (0.40)
    â””â”€ ä»…æåŠï¼šéœ€è¦åŸºæœ¬æ³¨é‡Š

Agentæ”¶åˆ°çš„ä¸Šä¸‹æ–‡æ€»é‡ï¼š~3000å­—ï¼ˆè€Œé10000å­—å…¨é‡ï¼‰
```

### æƒé‡çš„åŠ¨æ€å˜åŒ–

```
åˆå§‹çŠ¶æ€ï¼ˆéšæœºï¼‰ï¼š
{
  "zero_coupling": 0.50,
  "modularity": 0.50,
  "naming": 0.50
}

ç¬¬1è½®äº§å‡ºï¼šè´¨é‡0.65
åˆ†æå‘ç°ï¼šzero_couplingå®æ–½è‰¯å¥½çš„ä»£ç è´¨é‡æ›´é«˜

æ›´æ–°æƒé‡ï¼š
{
  "zero_coupling": 0.72,    // â†‘ ç›¸å…³æ€§é«˜
  "modularity": 0.55,       // â†‘ ç¨æœ‰æå‡
  "naming": 0.48            // â†“ ç›¸å…³æ€§å¼±
}

ç¬¬5è½®äº§å‡ºï¼šè´¨é‡0.82
ç»§ç»­ä¼˜åŒ–...

ç¬¬10è½®ç¨³å®šï¼š
{
  "zero_coupling": 0.92,    // â†‘â†‘ æ ¸å¿ƒç‰¹å¾
  "modularity": 0.85,       // â†‘ é‡è¦ç‰¹å¾
  "naming": 0.65            // = ä¸­ç­‰ç‰¹å¾
}
```

## ğŸ¨ ä»€ä¹ˆæ˜¯"æ¸è¿›å¼æŠ«éœ²"ï¼Ÿ

### æ¦‚å¿µå®šä¹‰

**æ¸è¿›å¼æŠ«éœ²**æ˜¯æ ¹æ®ç´¢å¼•æƒé‡ï¼Œé€‰æ‹©æ€§åœ°å±•ç¤ºä¸Šä¸‹æ–‡ç»™Agentï¼Œç¡®ä¿Agentæ¥æ”¶åˆ°çš„æ˜¯"**æœ€ç›¸å…³çš„20%**"è€Œé"**æ‰€æœ‰çš„100%**"ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ

#### é—®é¢˜1ï¼šä¸Šä¸‹æ–‡çª—å£æœ‰é™

```
GPT-4ä¸Šä¸‹æ–‡çª—å£ï¼š128K tokens â‰ˆ 96,000 words
UEFNå®Œæ•´æ–‡æ¡£ï¼š200,000+ words

å…¨é‡æŠ«éœ²ï¼šä¸å¯èƒ½
```

#### é—®é¢˜2ï¼šä¿¡æ¯è¿‡è½½

```
å®éªŒæ•°æ®ï¼š
â”œâ”€ ç»™Agent 10é¡µæ–‡æ¡£ â†’ è´¨é‡0.75
â”œâ”€ ç»™Agent 100é¡µæ–‡æ¡£ â†’ è´¨é‡0.62 (åè€Œä¸‹é™ï¼)
â””â”€ ç»™Agent 3é¡µç²¾é€‰æ–‡æ¡£ â†’ è´¨é‡0.85
```

**ç»“è®º**ï¼šæ›´å¤šä¿¡æ¯ â‰  æ›´å¥½äº§å‡º

### æŠ«éœ²ç­–ç•¥ç®—æ³•

```python
def progressive_disclosure(task, indices):
    """æ¸è¿›å¼æŠ«éœ²ç®—æ³•"""
    
    # 1. è¯»å–ç‰¹å¾æƒé‡
    weights = indices['feature_weights']
    
    # 2. æŒ‰æƒé‡æ’åº
    sorted_features = sort_by_weight(weights, descending=True)
    
    # 3. åˆ†çº§æŠ«éœ²
    context = []
    for feature, weight in sorted_features:
        if weight >= 0.85:
            # å®Œæ•´æŠ«éœ²
            context.append(load_pattern_full(feature))
            context.append(load_examples(feature, count=3))
        elif weight >= 0.70:
            # è¯¦ç»†æ‘˜è¦
            context.append(load_pattern_summary(feature))
            context.append(load_examples(feature, count=2))
        elif weight >= 0.50:
            # ç®€è¦æåŠ
            context.append(load_pattern_brief(feature))
        # weight < 0.50: ä¸æŠ«éœ²
    
    return context
```

### æŠ«éœ²ç¤ºä¾‹å¯¹æ¯”

#### å…¨é‡æŠ«éœ²ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

```
ç»™Agentçš„ä¸Šä¸‹æ–‡ï¼ˆ10,000å­—ï¼‰ï¼š

1. Zero Coupling å®Œæ•´æ–‡æ¡£ (1,500å­—)
2. Modularity å®Œæ•´æ–‡æ¡£ (1,200å­—)
3. Naming å®Œæ•´æ–‡æ¡£ (800å­—)
4. Comments å®Œæ•´æ–‡æ¡£ (700å­—)
5. Performance å®Œæ•´æ–‡æ¡£ (900å­—)
6. Error Handling å®Œæ•´æ–‡æ¡£ (800å­—)
7. æ‰€æœ‰50ä¸ªæ¡ˆä¾‹ (4,100å­—)

ç»“æœï¼šAgentè¿·å¤±åœ¨æµ·é‡ä¿¡æ¯ä¸­ï¼Œè´¨é‡0.65
```

#### æ¸è¿›å¼æŠ«éœ²ï¼ˆæ¡†æ¶æ–¹å¼ï¼‰

```
ç»™Agentçš„ä¸Šä¸‹æ–‡ï¼ˆ3,000å­—ï¼‰ï¼š

åŸºäºç´¢å¼•æƒé‡ï¼š
{
  "zero_coupling": 0.92,
  "modularity": 0.85,
  "naming": 0.65,
  ...å…¶ä»– < 0.50
}

æŠ«éœ²å†…å®¹ï¼š
1. Zero Coupling å®Œæ•´æ–‡æ¡£ (1,500å­—) + 3ä¸ªæ¡ˆä¾‹ (600å­—)
2. Modularity è¯¦ç»†æ‘˜è¦ (400å­—) + 2ä¸ªæ¡ˆä¾‹ (400å­—)
3. Naming ç®€è¦è¯´æ˜ (100å­—)

ç»“æœï¼šAgentèšç„¦æ ¸å¿ƒè¦ç‚¹ï¼Œè´¨é‡0.85
```

### æŠ«éœ²çš„åŠ¨æ€è°ƒæ•´

```
ä»»åŠ¡1ï¼šç”Ÿæˆæ•°æ®ç»„ä»¶ï¼ˆData Layerï¼‰
  â†’ å¼ºè°ƒ zero_coupling (0.95), data_integrity (0.90)
  â†’ å¼±åŒ– ui_interaction (0.30)

ä»»åŠ¡2ï¼šç”ŸæˆUIç»„ä»¶ï¼ˆUI Layerï¼‰
  â†’ å¼ºè°ƒ event_driven (0.92), ui_interaction (0.88)
  â†’ å¼±åŒ– data_integrity (0.40)
```

**å…³é”®**ï¼šæŠ«éœ²ç­–ç•¥éšä»»åŠ¡ç±»å‹åŠ¨æ€è°ƒæ•´ã€‚

## ğŸ”„ ä¸ºä»€ä¹ˆè¦å¾ªç¯ï¼Ÿ

### å¾ªç¯çš„ç›®çš„

**å•æ¬¡è°ƒç”¨çš„é—®é¢˜**ï¼š

```
ç¬¬1æ¬¡ç”Ÿæˆï¼š
  ç´¢å¼•éšæœº â†’ æŠ«éœ²ä¸ç²¾å‡† â†’ è´¨é‡0.65
  
å¦‚æœåœåœ¨è¿™é‡Œï¼š
  æ°¸è¿œæ— æ³•çŸ¥é“"ä»€ä¹ˆæ˜¯å¥½çš„æŠ«éœ²ç­–ç•¥"
```

**å¾ªç¯çš„ä»·å€¼**ï¼š

```
ç¬¬1è½® â†’ è´¨é‡0.65 â†’ åé¦ˆï¼šzero_couplingé‡è¦
ç¬¬2è½® â†’ è°ƒæ•´ç´¢å¼• â†’ è´¨é‡0.72 â†’ åé¦ˆï¼šmodularityä¹Ÿé‡è¦
ç¬¬3è½® â†’ ç»§ç»­ä¼˜åŒ– â†’ è´¨é‡0.78 â†’ ...
ç¬¬Nè½® â†’ ç´¢å¼•ç¨³å®š â†’ è´¨é‡0.87+
```

**å¾ªç¯è®©ç³»ç»Ÿæ‰¾åˆ°æœ€ä¼˜æŠ«éœ²ç­–ç•¥**ã€‚

### å¾ªç¯çš„ä¸‰ä¸ªé˜¶æ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: æ¢ç´¢ï¼ˆå‰30%å¾ªç¯ï¼‰         â”‚
â”‚  â”œâ”€ ç´¢å¼•æƒé‡å˜åŒ–å¤§                   â”‚
â”‚  â”œâ”€ å°è¯•ä¸åŒæŠ«éœ²ç­–ç•¥                 â”‚
â”‚  â””â”€ è´¨é‡æ³¢åŠ¨æ˜æ˜¾                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: ä¼˜åŒ–ï¼ˆä¸­é—´40%å¾ªç¯ï¼‰       â”‚
â”‚  â”œâ”€ è¯†åˆ«é«˜ç›¸å…³ç‰¹å¾                   â”‚
â”‚  â”œâ”€ æƒé‡é€æ¸åˆ†åŒ–                     â”‚
â”‚  â””â”€ è´¨é‡ç¨³æ­¥ä¸Šå‡                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: ç¨³å®šï¼ˆæœ€å30%å¾ªç¯ï¼‰       â”‚
â”‚  â”œâ”€ æƒé‡è¶‹äºç¨³å®š                     â”‚
â”‚  â”œâ”€ æŠ«éœ²ç­–ç•¥æˆç†Ÿ                     â”‚
â”‚  â””â”€ è´¨é‡ç»´æŒé«˜ä½                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½•æ—¶åœæ­¢å¾ªç¯ï¼Ÿ

**åœæ­¢æ¡ä»¶**ï¼š

1. **è´¨é‡ç¨³å®š** - è¿ç»­5è½®è´¨é‡æ³¢åŠ¨ < 0.02
2. **æƒé‡æ”¶æ•›** - æƒé‡å˜åŒ– < 0.05
3. **èƒ½åŠ›è¦†ç›–** - ç›®æ ‡èƒ½åŠ›ç‚¹è¦†ç›–ç‡ > 90%

```python
def should_stop_loop(history):
    last_5_scores = [h.quality for h in history[-5:]]
    variance = calculate_variance(last_5_scores)
    
    weight_changes = calculate_weight_changes(history[-5:])
    
    coverage = calculate_coverage(produced_modules)
    
    return (
        variance < 0.02 and
        weight_changes < 0.05 and
        coverage > 0.90
    )
```

## ğŸ“ åé¦ˆé©±åŠ¨çš„å­¦ä¹ 

### å­¦ä¹ ä»€ä¹ˆï¼Ÿ

**ä¸æ˜¯å­¦ä¹ **ï¼šå¦‚ä½•å†™ä»£ç ï¼ˆè¿™æ˜¯Agentçš„èƒ½åŠ›ï¼‰

**è€Œæ˜¯å­¦ä¹ **ï¼šå¦‚ä½•å¼•å¯¼Agentå†™å‡ºæ›´å¥½çš„ä»£ç ï¼ˆè¿™æ˜¯Skillçš„èŒè´£ï¼‰

### å­¦ä¹ æµç¨‹

```
1. æ”¶é›†åé¦ˆ
   â”œâ”€ äº§å‡ºä»£ç 
   â”œâ”€ è´¨é‡è¯„åˆ†ï¼ˆäººå·¥æˆ–è‡ªåŠ¨ï¼‰
   â””â”€ ç‰¹å¾éµå®ˆæƒ…å†µ
   
2. ç›¸å…³æ€§åˆ†æ
   â”œâ”€ è®¡ç®—ï¼šç‰¹å¾X â†” è´¨é‡åˆ†æ•°
   â”œâ”€ ä¾‹ï¼šzero_couplingéµå®ˆ â†’ è´¨é‡+0.15
   â””â”€ ä¾‹ï¼šnamingä¸ç†æƒ³ â†’ è´¨é‡-0.05
   
3. æƒé‡æ›´æ–°
   â”œâ”€ ç›¸å…³æ€§é«˜çš„ç‰¹å¾ â†’ æƒé‡â†‘
   â””â”€ ç›¸å…³æ€§ä½çš„ç‰¹å¾ â†’ æƒé‡â†“
   
4. å½±å“ä¸‹æ¬¡æŠ«éœ²
   â”œâ”€ é«˜æƒé‡ç‰¹å¾ â†’ å®Œæ•´æŠ«éœ²
   â””â”€ ä½æƒé‡ç‰¹å¾ â†’ ç®€è¦æˆ–ä¸æŠ«éœ²
```

### å­¦ä¹ ç®—æ³•ç¤ºä¾‹

```python
def update_weights(old_weights, correlations, learning_rate=0.2):
    """æƒé‡æ›´æ–°ç®—æ³•"""
    new_weights = {}
    
    for feature in old_weights:
        correlation = correlations[feature]  # -1 åˆ° 1
        
        # å°†ç›¸å…³ç³»æ•°æ˜ å°„åˆ° 0-1
        normalized = (correlation + 1) / 2
        
        # å¹³æ»‘æ›´æ–°
        new_weights[feature] = (
            old_weights[feature] * (1 - learning_rate) +
            normalized * learning_rate
        )
    
    return new_weights

# ç¤ºä¾‹
old = {"zero_coupling": 0.50, "naming": 0.50}
corr = {"zero_coupling": 0.85, "naming": 0.30}

new = update_weights(old, corr, learning_rate=0.2)
# new = {
#   "zero_coupling": 0.50 * 0.8 + 0.925 * 0.2 = 0.585
#   "naming": 0.50 * 0.8 + 0.65 * 0.2 = 0.530
# }

# ç»è¿‡å¤šè½®å...
# zero_coupling ä¼šé€æ¸è¶‹å‘ 0.92+
# naming ä¼šä¿æŒåœ¨ 0.65 å·¦å³
```

### é¿å…è¿‡æ‹Ÿåˆ

```python
# è®¾ç½®æƒé‡èŒƒå›´çº¦æŸ
MIN_WEIGHT = 0.20  # ä¸å®Œå…¨å¿½ç•¥ä»»ä½•ç‰¹å¾
MAX_WEIGHT = 0.95  # ä¸è¿‡åº¦ä¾èµ–å•ä¸€ç‰¹å¾

def clip_weights(weights):
    return {
        k: max(MIN_WEIGHT, min(MAX_WEIGHT, v))
        for k, v in weights.items()
    }
```

## ğŸ§  æ¦‚å¿µä¹‹é—´çš„å…³ç³»

```
ç´¢å¼•é…ç½®
  â†“ å†³å®š
æ¸è¿›å¼æŠ«éœ²ç­–ç•¥
  â†“ å¼•å¯¼
Agentç”Ÿæˆä»£ç 
  â†“ äº§ç”Ÿ
è´¨é‡åé¦ˆ
  â†“ é©±åŠ¨
å­¦ä¹ ä¸ä¼˜åŒ–
  â†“ æ›´æ–°
ç´¢å¼•é…ç½®ï¼ˆå½¢æˆé—­ç¯ï¼‰
```

**é—­ç¯æ˜¯å…³é”®**ï¼šæ¯æ¬¡å¾ªç¯éƒ½è®©ç´¢å¼•å˜å¾—æ›´ç²¾å‡†ã€‚

## ğŸ“Š æ¦‚å¿µæ€»ç»“è¡¨

| æ¦‚å¿µ | æœ¬è´¨ | å­˜å‚¨å½¢å¼ | è¿›åŒ–æ–¹å¼ |
|-----|------|---------|---------|
| **ç´¢å¼•** | æƒé‡åŒ–æŒ‡é’ˆ | JSONé…ç½® | åé¦ˆå­¦ä¹  |
| **ç‰¹å¾æƒé‡** | é‡è¦æ€§è¯„åˆ† | 0-1æµ®ç‚¹æ•° | ç›¸å…³æ€§åˆ†æ |
| **æ¸è¿›å¼æŠ«éœ²** | é€‰æ‹©æ€§å±•ç¤º | ç®—æ³•ç­–ç•¥ | æƒé‡é©±åŠ¨ |
| **åé¦ˆå­¦ä¹ ** | è´¨é‡ä¼˜åŒ– | å†å²æ•°æ® | ç»Ÿè®¡åˆ†æ |

## â“ å¸¸è§ç–‘é—®

### Q1: ç´¢å¼•ä¼šä¸ä¼šè¿‡æ—¶ï¼Ÿ

**ç­”**ï¼šä¼šï¼Œä½†å¯ä»¥é‡æ–°å­¦ä¹ ã€‚å¦‚æœæŠ€æœ¯æ ˆå˜åŒ–ï¼ˆå¦‚æ–°APIå‘å¸ƒï¼‰ï¼Œé‡ç½®ç´¢å¼•æƒé‡ï¼Œé‡æ–°è¿›è¡Œæ¢ç´¢å¾ªç¯å³å¯ã€‚

### Q2: å­¦ä¹ éœ€è¦å¤šå°‘æ•°æ®ï¼Ÿ

**ç­”**ï¼šè‡³å°‘10-20ä¸ªäº§å‡ºæ ·æœ¬æ‰èƒ½ç¨³å®šã€‚å‰æœŸæ³¢åŠ¨æ˜¯æ­£å¸¸çš„ã€‚

### Q3: èƒ½å¦æ‰‹åŠ¨è°ƒæ•´æƒé‡ï¼Ÿ

**ç­”**ï¼šå¯ä»¥ï¼Œä½†å»ºè®®åªç”¨äºï¼š
- åˆå§‹åŒ–ç§å­æƒé‡
- çº æ­£æ˜æ˜¾é”™è¯¯
- æ³¨å…¥é¢†åŸŸçŸ¥è¯†

å¤§éƒ¨åˆ†æ—¶é—´è®©ç³»ç»Ÿè‡ªåŠ¨å­¦ä¹ ã€‚

## ğŸ“– ä¸‹ä¸€æ­¥

- **æŸ¥çœ‹é¡¹ç›®ç»“æ„** â†’ [03-project-structure.md](./03-project-structure.md)
- **å­¦ä¹ Skillå®šä¹‰** â†’ [04-skill-definitions.md](./04-skill-definitions.md)
- **ç†è§£ç´¢å¼•æœºåˆ¶** â†’ [05-index-mechanism.md](./05-index-mechanism.md)

---

**è¿”å›** â†’ [æ¡†æ¶æ–‡æ¡£é¦–é¡µ](./README.md)
