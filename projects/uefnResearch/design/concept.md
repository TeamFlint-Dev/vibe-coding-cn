# uefn基础模块研究 - 研究概念文档

> **项目**：uefn基础模块研究（uefnResearch）  
> **版本**：v1.0  
> **阶段**：概念定义  
> **创建时间**：2026-01-06

---

## 一、项目定位

### 核心定义

**uefn基础模块研究** 是一个**技术储备库**，专注于探索和验证 UEFN/Verse 开发中的基础技术问题，为游戏项目提供经过验证的、可靠的技术模块。

### 与游戏项目的区别

| 维度 | uefn基础模块研究 | 游戏项目（如 Trophy Fishing） |
|------|--------------|----------------------------|
| **目标** | 技术验证、知识沉淀 | 可玩的游戏体验 |
| **产出** | 代码库模块 + 研究文档 | 完整游戏 + 设计文档 |
| **范围** | 单一技术点深入研究 | 多系统集成与平衡 |
| **用户** | 开发者（内部） | 玩家（外部） |
| **迭代** | 按技术主题独立推进 | 按游戏版本整体迭代 |

---

## 二、研究方向

### 已识别的研究主题

基于当前 `verse/` 代码库的组织，以及游戏开发的实际需求，以下主题值得深入研究：

#### 1. 曲线系统（Curve System）

**研究动机**：

- 游戏中大量数值（伤害、成长、掉落率）需要曲线控制
- UEFN 缺少内置的曲线编辑器，需要自建

**研究问题**：

- 如何在 Verse 中表达和存储曲线？
- 如何高效采样曲线（线性插值、样条插值）？
- 如何组合多条曲线（加法、乘法、串联）？

**预期产出**：

- `verse/modules/curve/` 完善和文档化
- 曲线构建最佳实践指南

#### 2. 伪随机系统（Pseudo-Random System）

**研究动机**：

- 游戏需要可控的随机性（掉落、暴击、刷新）
- 纯随机会导致体验不公平（连续不出货）

**研究问题**：

- Verse 中的随机数生成器特性？（是否真随机）
- 如何实现保底机制（pity system）？
- 如何实现权重抽取（weighted random）？
- 如何实现种子随机（可复现的随机）？

**预期产出**：

- `verse/library/probability/` 扩展
- 概率系统使用指南

#### 3. 数学工具库（Math Utilities）

**研究动机**：

- Verse 的 Math API 相对基础，需要扩展
- 游戏开发中常用的数学工具需要封装

**研究问题**：

- 向量运算的性能优化？
- 常用数学函数的 Verse 实现（如 Clamp, Lerp, Smoothstep）
- 几何计算（距离、角度、碰撞检测）

**预期产出**：

- `verse/library/math/` 完善
- 数学工具最佳实践

#### 4. 数据持久化（Data Persistence）

**研究动机**：

- 玩家数据需要跨会话保存
- UEFN 的存储 API 限制需要了解

**研究问题**：

- Verse 中的数据保存机制？
- 如何序列化复杂数据结构？
- 存储配额限制是多少？

**预期产出**：

- 数据持久化方案文档
- 存储 API 能力边界文档

#### 5. 性能分析（Performance Profiling）

**研究动机**：

- Verse 代码的性能特性不明确
- 需要了解哪些操作是昂贵的

**研究问题**：

- 如何测量 Verse 代码性能？
- 常见性能陷阱有哪些？
- 优化建议和最佳实践？

**预期产出**：

- 性能优化指南
- 性能测试工具/方法

---

## 三、研究流程

### 单个研究主题的标准流程

```text
1. 问题定义
   ↓
2. 现状调研
   - 官方文档
   - API Digest
   - 社区实践
   ↓
3. 能力边界确认
   - 能做什么
   - 不能做什么
   - 限制是什么
   ↓
4. 原型验证
   - 最小化代码验证
   - 远程编译通过
   ↓
5. 模块沉淀
   - 整理到 verse/library 或 verse/modules
   - 编写使用文档
   ↓
6. 知识记录
   - 更新研究记录
   - 记录决策和踩坑
```

---

## 四、研究优先级

### 第一期研究主题（MVP）

按优先级排序：

1. **曲线系统**（P0）
   - 原因：trophyFishing 项目需要钓鱼概率曲线
   - 现状：`verse/modules/curve/` 已有基础实现，需要完善

2. **伪随机系统**（P0）
   - 原因：掉落系统、钓鱼系统都需要可控随机
   - 现状：`verse/library/probability/` 已有部分实现

3. **数学工具库**（P1）
   - 原因：通用需求，支撑其他模块
   - 现状：`verse/library/math/` 已有基础

4. **数据持久化**（P2）
   - 原因：游戏项目后期需求
   - 现状：尚未调研

5. **性能分析**（P2）
   - 原因：优化阶段需求
   - 现状：尚未调研

---

## 五、成功标准

### 研究项目的成功指标

| 指标 | 定义 | 目标值 |
|------|------|--------|
| **模块可用性** | 模块被游戏项目实际使用 | ≥ 3 个模块 |
| **文档完整性** | 每个模块有完整的使用文档 | 100% |
| **编译通过率** | 代码提交前通过远程编译 | 100% |
| **知识沉淀** | 研究过程有决策记录和踩坑记录 | 每个主题 ≥ 1 份 |

---

## 六、风险与约束

### 已知约束

1. **UEFN API 限制**：某些功能可能无法实现，需提前验证
2. **编译环境依赖**：必须通过远程编译验证，本地无法运行
3. **文档依赖**：依赖 `verseDigestSync` 保持 API 文档最新

### 风险缓解

| 风险 | 缓解措施 |
|------|----------|
| API 能力不足 | 提前查阅 API Digest，确认能力边界 |
| 研究范围蔓延 | 每个主题设定明确的研究问题和产出 |
| 代码库碎片化 | 遵循统一的代码组织规范 |

---

## 七、下一步行动

### 立即行动

1. ✅ 创建项目结构
2. ✅ 定义研究方向
3. ⏳ 创建研究主题列表文档（`research-topics.md`）
4. ⏳ 选择第一个研究主题（建议：曲线系统）
5. ⏳ 开始第一个研究循环

### 调用技能

- 下一步：使用 `verseResearch` 技能开始具体研究
- 如需架构决策：使用 `verseArchitectureSelector`
- 如需代码审计：使用 `verseCodeAuditor`

---

**文档创建时间**：2026-01-06
