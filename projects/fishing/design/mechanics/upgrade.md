# â¬†ï¸ å‡çº§ç³»ç»Ÿ - æœºåˆ¶è®¾è®¡

> **ç³»ç»Ÿ**ï¼šUpgrade System  
> **ç‰ˆæœ¬**ï¼šv1.0  
> **å‰ç½®ä¾èµ–**ï¼š`@mechanics/income.md`  
> **ç”Ÿæˆè€…**ï¼šgame-mechanics-designer

---

## ä¸€ã€ç³»ç»Ÿæ¦‚è¿°

**æ ¸å¿ƒèŒè´£**ï¼šç®¡ç†ç©å®¶çš„èƒ½åŠ›æå‡å’Œè¿›åº¦è§£é”ã€‚

**è®¾è®¡ç›®æ ‡**ï¼š

- æä¾›æ˜ç¡®çš„æˆé•¿æ„Ÿå’Œç›®æ ‡
- å‡çº§æ•ˆæœç«‹ç«¿è§å½±
- è´¹ç”¨æ›²çº¿åˆç†ï¼Œä¸å¡è¿›åº¦ä¹Ÿä¸è¿‡å¿«

---

## äºŒã€MVP å‡çº§é¡¹

### 2.1 é±¼ç«¿ç­‰çº§

**å”¯ä¸€å‡çº§é¡¹**ï¼ˆMVP é˜¶æ®µèšç„¦ï¼‰

| å±æ€§ | æè¿° |
|------|------|
| åç§° | é±¼ç«¿ç­‰çº§ |
| æœ€å¤§ç­‰çº§ | 10 |
| æ•ˆæœ | æå‡ç¨€æœ‰é±¼æ‰è½æ¦‚ç‡ |
| è§£é”æ¡ä»¶ | æ— ï¼ˆåˆå§‹å¯ç”¨ï¼‰ |

### 2.2 ç­‰çº§æ•ˆæœè¡¨

| ç­‰çº§ | ç¨€æœ‰åŠ æˆ | ç´¯è®¡æ•ˆæœ | å‡çº§è´¹ç”¨ | ç´¯è®¡æŠ•å…¥ |
|------|----------|----------|----------|----------|
| 1 | - | åŸºç¡€ | - | 0 |
| 2 | +5% | +5% | 100 | 100 |
| 3 | +5% | +10% | 150 | 250 |
| 4 | +5% | +15% | 225 | 475 |
| 5 | +5% | +20% | 337 | 812 |
| 6 | +5% | +25% | 506 | 1,318 |
| 7 | +5% | +30% | 759 | 2,077 |
| 8 | +5% | +35% | 1,139 | 3,216 |
| 9 | +5% | +40% | 1,708 | 4,924 |
| 10 | +5% | +45% | 2,562 | 7,486 |

**è´¹ç”¨å…¬å¼**ï¼š

```
UpgradeCost(level) = Floor(100 Ã— 1.5^(level-2))
```

### 2.3 ç¨€æœ‰åº¦åŠ æˆæœºåˆ¶

```
åŸå§‹æ‰è½æƒé‡:
  Common:   550 (69.6%)
  Uncommon: 150 (19.0%)
  Rare:     60  (7.6%)
  Epic:     30  (3.8%)

åº”ç”¨ +20% ç¨€æœ‰åŠ æˆå (Lv5):
  # Rare åŠä»¥ä¸Šæƒé‡å¢åŠ 
  Rare:     60 Ã— 1.2 = 72
  Epic:     30 Ã— 1.2 = 36
  
  # Common æƒé‡å‡å°‘ä»¥è¡¥å¿
  å‡å°‘é‡ = (72-60) + (36-30) = 18
  Common: 550 - 18 = 532
  
è°ƒæ•´åæ¦‚ç‡:
  Common:   532 (67.3%)  â†“
  Uncommon: 150 (19.0%)  -
  Rare:     72  (9.1%)   â†‘
  Epic:     36  (4.6%)   â†‘
```

---

## ä¸‰ã€å‡çº§æµç¨‹

### 3.1 çŠ¶æ€æœº

```
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   LOCKED   â”‚  (ç­‰çº§ä¸å¯ç”¨)
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ [æ»¡è¶³å‰ç½®æ¡ä»¶]
                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ AVAILABLE  â”‚  (å¯å‡çº§)
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚
      [é‡‘å¸ä¸è¶³]       [é‡‘å¸è¶³å¤Ÿ]
            â”‚               â”‚
            â–¼               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ AFFORDABLE â”‚  â”‚  UPGRADE   â”‚
      â”‚   = false  â”‚  â”‚  CONFIRM   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ [ç¡®è®¤å‡çº§]
                            â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  UPGRADED  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  ä¸‹ä¸€çº§ ?  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å‡çº§æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç©å®¶æ‰“å¼€å•†åº— â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ˜¾ç¤ºå‡çº§é€‰é¡¹ â”‚
â”‚ å½“å‰ç­‰çº§     â”‚
â”‚ ä¸‹ä¸€çº§æ•ˆæœ   â”‚
â”‚ å‡çº§è´¹ç”¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ ç‚¹å‡»ã€Œå‡çº§ã€
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éªŒè¯é‡‘å¸     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
  â”‚         â”‚
ä¸è¶³      è¶³å¤Ÿ
  â”‚         â”‚
  â–¼         â–¼
æç¤º     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
é‡‘å¸     â”‚ æ‰£é™¤é‡‘å¸     â”‚
ä¸è¶³     â”‚ ç­‰çº§ +1      â”‚
         â”‚ åº”ç”¨æ•ˆæœ     â”‚
         â”‚ æ’­æ”¾åŠ¨ç”»     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ é€šçŸ¥é’“é±¼ç³»ç»Ÿ â”‚
         â”‚ æ›´æ–°æ‰è½è¡¨   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€æ•°æ®ç»“æ„

```verse
upgrade_system := class:
    var RodLevel : int = 1              # å½“å‰é±¼ç«¿ç­‰çº§
    
    # å¸¸é‡
    MAX_ROD_LEVEL : int = 10
    BASE_COST : int = 100
    COST_MULTIPLIER : float = 1.5
    RARITY_BONUS_PER_LEVEL : float = 0.05

upgrade_item := struct:
    ItemId : string           # "rod_upgrade"
    CurrentLevel : int
    MaxLevel : int
    UpgradeCost : int
    EffectDescription : string
```

---

## äº”ã€äº‹ä»¶æ¥å£

### 5.1 æ¥æ”¶äº‹ä»¶

| äº‹ä»¶ | æ¥æº | å¤„ç† |
|------|------|------|
| `OnGoldChanged` | æ”¶ç›Šç³»ç»Ÿ | æ›´æ–°å¯è´­ä¹°çŠ¶æ€ |

### 5.2 å‘å‡ºäº‹ä»¶

| äº‹ä»¶ | è§¦å‘æ¡ä»¶ | æ•°æ® |
|------|----------|------|
| `OnUpgradeCompleted` | å‡çº§æˆåŠŸ | itemId, newLevel |
| `OnRarityBonusChanged` | é±¼ç«¿å‡çº§ | newBonusPercent |

---

## å…­ã€UI è®¾è®¡

### 6.1 å‡çº§å•†åº—ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”§ å‡çº§å•†åº—                        [X] å…³é—­   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ£ é±¼ç«¿                                 â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  å½“å‰ç­‰çº§: â­â­â­â­â­ (Lv.5)              â”‚  â”‚
â”‚  â”‚  å½“å‰æ•ˆæœ: ç¨€æœ‰æ‰è½ +20%                 â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  ä¸‹ä¸€ç­‰çº§: Lv.6                          â”‚  â”‚
â”‚  â”‚  å‡çº§æ•ˆæœ: ç¨€æœ‰æ‰è½ +25%                 â”‚  â”‚
â”‚  â”‚  å‡çº§è´¹ç”¨: ğŸ’° 506                        â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  [      å‡çº§ (ğŸ’° 506)      ]             â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                â”‚
â”‚  ä½ çš„é‡‘å¸: ğŸ’° 1,234                            â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å‡çº§æˆåŠŸå¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    â”‚
â”‚      ğŸ‰ å‡çº§æˆåŠŸï¼                  â”‚
â”‚                                    â”‚
â”‚      ğŸ£ é±¼ç«¿ Lv.5 â†’ Lv.6           â”‚
â”‚                                    â”‚
â”‚      ç¨€æœ‰æ‰è½: +20% â†’ +25%         â”‚
â”‚                                    â”‚
â”‚         [  å¤ªæ£’äº†ï¼  ]              â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 é‡‘å¸ä¸è¶³æç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    â”‚
â”‚      ğŸ’° é‡‘å¸ä¸è¶³                    â”‚
â”‚                                    â”‚
â”‚      éœ€è¦: 506 é‡‘å¸                 â”‚
â”‚      å½“å‰: 234 é‡‘å¸                 â”‚
â”‚      è¿˜å·®: 272 é‡‘å¸                 â”‚
â”‚                                    â”‚
â”‚  [ç»§ç»­é’“é±¼]     [æ”¾ç½®æ›´å¤šé±¼]        â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€å¹³è¡¡è€ƒé‡

### 7.1 å‡çº§èŠ‚å¥åˆ†æ

| é˜¶æ®µ | ç›®æ ‡ç­‰çº§ | ç´¯è®¡è´¹ç”¨ | æ”¶ç›Šç‡å‡è®¾ | é¢„è®¡æ—¶é•¿ |
|------|----------|----------|-----------|----------|
| æ–°æ‰‹ | Lv.3 | 250 | 5/ç§’ | 50 ç§’ |
| æˆé•¿ | Lv.5 | 812 | 15/ç§’ | 55 ç§’ |
| ä¸­æœŸ | Lv.7 | 2,077 | 30/ç§’ | 70 ç§’ |
| åæœŸ | Lv.10 | 7,486 | 50/ç§’ | 150 ç§’ |

**ç»“è®º**ï¼šæ¯æ¬¡å‡çº§é—´éš”çº¦ 1-3 åˆ†é’Ÿï¼ŒèŠ‚å¥é€‚ä¸­

### 7.2 æ•ˆæœæ„ŸçŸ¥åˆ†æ

| å‡çº§ | ç¨€æœ‰åº¦æå‡ | å¯æ„ŸçŸ¥æ€§ |
|------|-----------|----------|
| 1â†’2 | +5% | å¼±ï¼ˆéœ€è¦å¤šæ¬¡é’“é±¼ä½“éªŒï¼‰ |
| 4â†’5 | +20% ç´¯è®¡ | ä¸­ï¼ˆå¼€å§‹æ„Ÿè§‰è“é±¼å˜å¤šï¼‰ |
| 9â†’10 | +45% ç´¯è®¡ | å¼ºï¼ˆç´«é±¼é¢‘ç¹å‡ºç°ï¼‰ |

---

## å…«ã€æ‰©å±•é¢„ç•™

### 8.1 åç»­å‡çº§é¡¹ï¼ˆé MVPï¼‰

| å‡çº§é¡¹ | æ•ˆæœ | ä¼˜å…ˆçº§ |
|--------|------|--------|
| å±•ç¤ºä½æ‰©å±• | +1 å±•ç¤ºä½ | P1 |
| è‡ªåŠ¨é’“é±¼ | æ— éœ€æ‰‹åŠ¨æ”¶æ† | P2 |
| æ”¶ç›ŠåŠ æˆ | å±•ç¤ºæ”¶ç›Š +X% | P2 |
| é’“ç‚¹è§£é” | å¼€æ”¾æ–°é’“ç‚¹ | P2 |

### 8.2 æ¥å£é¢„ç•™

```verse
# é€šç”¨å‡çº§æ¥å£
interface IUpgradeable:
    GetCurrentLevel() : int
    GetMaxLevel() : int
    GetUpgradeCost() : int
    CanUpgrade() : logic
    DoUpgrade() : void
    GetEffectDescription() : string
```

---

## ä¹ã€UEFN å®ç°è¦ç‚¹

### 9.1 å‡çº§ç®¡ç†å™¨

```verse
upgrade_manager := class(creative_device):
    var RodLevel : int = 1
    
    GetUpgradeCost(CurrentLevel : int) : int =
        if CurrentLevel >= 10:
            return -1  # å·²æ»¡çº§
        Floor(100.0 * Pow(1.5, CurrentLevel - 1))
    
    TryUpgrade(Player : agent) : logic =
        cost := GetUpgradeCost(RodLevel)
        if cost < 0:
            return false
            
        if PlayerGold[Player] >= cost:
            set PlayerGold[Player] -= cost
            set RodLevel += 1
            NotifyFishingSystem(GetRarityBonus())
            return true
        return false
    
    GetRarityBonus() : float =
        (RodLevel - 1) * 0.05
```

### 9.2 ä¸é’“é±¼ç³»ç»Ÿè”åŠ¨

```verse
# é’“é±¼ç³»ç»Ÿæ¥æ”¶å‡çº§é€šçŸ¥
OnRarityBonusChanged(NewBonus : float) : void =
    set CurrentRarityBonus = NewBonus
    RecalculateLootTable()
```

---

## åã€ä¸‹ä¸€æ­¥

**å‡çº§ç³»ç»Ÿæœºåˆ¶è®¾è®¡å®Œæˆ** âœ…

**å…¨éƒ¨ 5 ä¸ªæ ¸å¿ƒç³»ç»Ÿæœºåˆ¶è®¾è®¡å®Œæˆï¼š**

- âœ… `@mechanics/fishing.md` - é’“é±¼ç³»ç»Ÿ
- âœ… `@mechanics/trophy.md` - æˆ˜åˆ©å“ç³»ç»Ÿ
- âœ… `@mechanics/base.md` - åŸºåœ°ç³»ç»Ÿ
- âœ… `@mechanics/income.md` - æ”¶ç›Šç³»ç»Ÿ
- âœ… `@mechanics/upgrade.md` - å‡çº§ç³»ç»Ÿ

ä¸‹ä¸€é˜¶æ®µï¼šè°ƒç”¨ `game-economy-designer` è¿›è¡Œæ•´ä½“ç»æµå¹³è¡¡è®¾è®¡

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2025-12-26*
