# 钓鱼循环设计模式 (Fishing Loop Pattern)

> **来源**: Fishing 项目 - 钓鱼系统设计  
> **适用场景**: 需要设计短周期、高频次的主动采集玩法  
> **目标感受**: 期待 → 惊喜 → 满足

---

## 适用场景

当你需要设计一个：
- 玩家主动触发的采集/获取玩法
- 每次循环 10-30 秒的快节奏体验
- 需要随机性带来惊喜感的系统
- 作为游戏核心循环的输入端

**典型应用**：
- 钓鱼系统
- 采矿/采集系统
- 抽卡/开箱系统
- 种植收获系统

---

## 目标感受

### 核心感受链

```
期待 (Anticipation)
  ↓
惊喜 (Surprise)
  ↓
满足 (Satisfaction)
```

**感受详解**：

| 阶段 | 感受 | 持续时间 | 传递方式 |
|------|------|----------|----------|
| **投入** | 期待 | 0.5-1s | 投掷动画、音效预告 |
| **等待** | 紧张期待 | 3-15s | 视觉提示（浮漂摇晃）、环境音 |
| **触发** | 兴奋 | 2s | 强烈视觉/听觉信号（咬钩提示） |
| **结果** | 惊喜/满足 | 2-3s | 稀有度差异化展示、奖励弹窗 |

---

## 实现方式

### 1. 状态机设计

```
IDLE ──[交互]──> CASTING ──[动画完成]──> WAITING
                                          │
                                      [咬钩]
                                          │
                                          ▼
SUCCESS <──[及时收杆]── HOOKED ──[超时]──> FAILED
   │
   └──[3s后]──> IDLE
```

**关键状态说明**：

| 状态 | 持续时间 | 玩家操作 | 退出条件 |
|------|----------|----------|----------|
| **IDLE** | 无限 | 可移动，可交互 | 按下交互键 |
| **CASTING** | 0.5s | 锁定移动 | 动画完成 |
| **WAITING** | 3-15s 随机 | 可取消 | 咬钩触发 或 超时 |
| **HOOKED** | 2s | 必须按收杆键 | 收杆成功 或 超时 |
| **SUCCESS** | 2s | 无操作 | 展示完成 |
| **FAILED** | 1s | 无操作 | 提示完成 |

### 2. 时间节奏设计

**核心原则**: 快节奏 + 适度随机 + 明确反馈

```
总周期: 10-30 秒
  ├─ 投竿: 0.5s (固定)
  ├─ 等待: 3-15s (随机)
  │   └─ 每秒 10% 概率触发咬钩
  ├─ 咬钩窗口: 2s (固定)
  └─ 结算: 2s (固定)
```

**节奏要点**：
- **固定部分**（投竿、结算）保证流程可预期
- **随机部分**（等待时间）保持新鲜感，避免无聊
- **反应窗口**（2秒）足够宽松，但需要注意力

### 3. 反馈三位一体

**视觉反馈**：
| 阶段 | 视觉效果 | 目的 |
|------|----------|------|
| 投竿 | 投竿轨迹线 + 落水粒子 | 确认操作生效 |
| 等待 | 浮漂轻微浮动 | 表示系统运行中 |
| 咬钩 | 浮漂剧烈下沉 + 水圈扩散 | 强烈吸引注意力 |
| 成功 | 鱼跃出水面 + 稀有度光效 | 惊喜时刻 |
| 失败 | 鱼线收回 + 灰色文字 | 明确失败状态 |

**听觉反馈**：
| 事件 | 音效 | 情感作用 |
|------|------|----------|
| 投竿 | `嗖嗖声` | 动作感 |
| 落水 | `噗通声` | 满足感 |
| 咬钩 | `咔嗒` 提示音 | **警觉！** |
| 成功 | 成功音效 + 稀有度变体 | 成就感 |
| 失败 | 低沉音效 | 轻微失望 |

**交互反馈**：
- 投竿时锁定移动（强制专注）
- 咬钩时屏幕微振（强化紧迫感）
- 成功时展示动画（仪式感）

### 4. 随机性设计

**咬钩时机计算**：

```
baseWaitTime = Random(3, 10)  // 基础等待 3-10秒
bonusTime = Random(0, 5)      // 额外随机 0-5秒
actualWaitTime = baseWaitTime + bonusTime

每秒检测：
  if Random() < 0.10:  触发咬钩
  if currentTime >= actualWaitTime:  强制触发或超时
```

**设计理由**：
- 最短 3 秒 → 避免太快让人措手不及
- 最长 15 秒 → 避免等待过久失去耐心
- 每秒 10% 概率 → 保持紧张感，避免预测

**掉落随机性**：
- 使用加权随机算法
- 升级提升稀有权重（而非移除低稀有）
- 早期也能钓到稀有鱼（惊喜感）

---

## 注意事项

### ⚠️ 必须避免的设计陷阱

1. **等待时间过长**
   - ❌ 等待超过 20 秒 → 玩家失去耐心
   - ✅ 控制在 15 秒内，平均 7-8 秒

2. **反应窗口过短**
   - ❌ 窗口 < 1 秒 → 挫败感，惩罚反应慢的玩家
   - ✅ 2 秒窗口 → 适合大部分玩家

3. **失败惩罚过重**
   - ❌ 失败扣除资源 → 负面情绪
   - ✅ 失败仅损失时间 → 可接受

4. **缺乏即时反馈**
   - ❌ 投竿后无反应，直接进入等待 → 操作不确定性
   - ✅ 投竿动画 + 音效 → 确认操作生效

5. **随机性过度**
   - ❌ 可能等待 30+ 秒 → 不可控感
   - ✅ 设置最大等待时间上限

### ✅ 必须做到的设计要点

1. **清晰的状态转换**
   - 每个状态都有明确的视觉/听觉标识
   - 玩家永远知道"现在是什么状态"

2. **适度的随机性**
   - 随机但有边界（不会太快也不会太慢）
   - 随机分布合理（避免连续极端情况）

3. **差异化的稀有度体验**
   - 稀有鱼的视觉/听觉反馈更强烈
   - 首次获得有特殊提示

4. **可打断机制**
   - 等待阶段允许取消（ESC）
   - 避免玩家被强制锁定

5. **节奏呼吸感**
   - 投竿-等待-触发-结算，有张有弛
   - 每次循环后有短暂放松（3秒冷却）

---

## 变体与扩展

### 变体 1: 多阶段触发

**场景**: 大型鱼需要多次收杆

```
WAITING ──> HOOKED_1 ──> REELING_1 ──> HOOKED_2 ──> REELING_2 ──> SUCCESS
```

**感受变化**: 紧张 → 松弛 → 紧张 → 松弛 → 成就

### 变体 2: QTE 强化

**场景**: 增加操作深度

```
HOOKED 阶段：
  - 屏幕提示随机按键（E / Space / F）
  - 正确按键 → 增加成功率
  - 错误按键 → 降低成功率
```

**感受变化**: 惊喜 → 挑战 → 成就感

### 变体 3: 环境影响

**场景**: 不同钓点有不同体验

```
钓点 A (宁静湖泊):
  - 等待时间: 5-12s
  - 鱼种: 温和鱼类
  - 氛围: 放松、平静

钓点 B (激流河段):
  - 等待时间: 2-8s
  - 鱼种: 凶猛鱼类
  - 氛围: 紧张、刺激
```

---

## 案例

### 案例 1: Fishing 项目

**应用场景**: MVP 单钓点钓鱼系统

**参数配置**:
- 投竿时间: 0.5s
- 等待时间: 3-15s
- 咬钩窗口: 2s
- 成功率: 85%（考虑漏收杆）

**效果评估**:
- 每分钟约 5 次钓鱼
- 节奏紧凑但不匆忙
- 惊喜感足够（稀有鱼概率 11.4%）

**玩家反馈指标** (预期):
- 单次游玩钓鱼次数 > 30 次
- 平均注意力集中度 > 70%
- 满意度与稀有掉落正相关

### 案例 2: 宝箱开启仪式（概念扩展）

**应用场景**: 战利品开启

**流程改编**:
```
IDLE ──[点击宝箱]──> OPENING (2s) ──> REVEAL (3s) ──> CLAIMED
```

**感受映射**:
- OPENING: 期待（宝箱发光、音乐渐强）
- REVEAL: 惊喜（光芒迸发、奖励悬浮）
- CLAIMED: 满足（收入背包动画）

---

## 设计检查清单

在使用本模式设计时，必须检查：

- [ ] 总周期时间是否在 10-30 秒范围？
- [ ] 是否有明确的状态转换反馈？
- [ ] 等待阶段是否可取消？
- [ ] 反应窗口是否足够宽松（≥ 1.5s）？
- [ ] 失败是否有合理提示（而非突然结束）？
- [ ] 稀有结果是否有差异化反馈？
- [ ] 是否有"呼吸感"（循环结束后的短暂放松）？
- [ ] 音效是否覆盖所有关键事件？
- [ ] 是否避免了长时间锁定玩家操作？
- [ ] 随机性是否有上下限？

---

## 与其他模式的关系

**组合使用**:
- **收集系统模式**: 钓鱼产出 → 图鉴收集
- **放置收益模式**: 钓鱼产出 → 展示获取收益
- **进度解锁模式**: 钓鱼频率 → 解锁升级

**对比模式**:
- **长周期采集**: 种植系统（数小时周期）
- **即时获取**: 点击收集（无等待）

---

## 参数调优指南

| 参数 | 当前值 | 调整范围 | 调整目的 |
|------|--------|----------|----------|
| 投竿时间 | 0.5s | 0.3-1.0s | 加快/放慢节奏 |
| 最小等待 | 3s | 2-5s | 控制最快节奏 |
| 最大等待 | 15s | 10-20s | 控制耐心阈值 |
| 咬钩窗口 | 2s | 1.5-3s | 调整难度 |
| 每秒触发概率 | 10% | 5-15% | 控制随机分布 |

**调优场景**:

- **玩家反馈「太慢」**: 减少最大等待时间，或增加每秒触发概率
- **玩家反馈「太难」**: 增加咬钩窗口时间
- **玩家反馈「太简单」**: 减少咬钩窗口，或增加随机性
- **玩家反馈「无聊」**: 缩短等待时间，增加视觉变化

---

## 元数据

**创建时间**: 2026-01-13  
**来源项目**: Fishing  
**提取者**: Visionary  
**验证状态**: ✅ 已在 Fishing 项目中应用  
**复用次数**: 1  
**最后更新**: 2026-01-13

---

*"短周期的重复不是无聊，而是冥想般的沉浸。关键在于每次循环都有微妙的不同，都有惊喜的可能。"*
