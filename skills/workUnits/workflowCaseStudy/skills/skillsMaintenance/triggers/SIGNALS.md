# 重构触发信号

> **用途**: 识别何时需要重构 Skill  
> **来源**: skillsMaintenance Skill

---

## 强信号（必须重构）

当出现以下**任一**信号时，**必须进入重构模式**：

| 信号 | 判断标准 | 示例 |
|------|----------|------|
| **文件过大** | 单个 SKILL.md 超过 500 行 | workflowAnalyzer/SKILL.md 达到 600 行 |
| **内容重复** | 相同或类似内容出现 3 次以上 | 多个设计模式描述了类似的配置模式 |
| **结构混乱** | 章节层级超过 4 层，或章节无逻辑顺序 | `### 2.3.1.1.1` 无法理解的深层嵌套 |
| **查找困难** | 人工查找特定信息需要超过 2 分钟 | "我记得有个模式，但找不到在哪" |
| **版本冲突频繁** | 多次研究更新同一部分导致冲突 | 设计模式表格被反复修改 |

---

## 弱信号（建议重构）

当出现以下信号时，**建议考虑重构**：

| 信号 | 判断标准 | 应对策略 |
|------|----------|----------|
| **更新频率低** | 某个章节连续 10 次研究都未更新 | 可能内容已饱和或不再相关 |
| **信息过时** | 内容基于旧版本 gh-aw，已有新版本 | 需要归档旧内容，更新新内容 |
| **抽象层级不一致** | 混合高层模式和低层实现细节 | 需要分层重构 |
| **缺少索引** | 无法快速定位相关内容 | 添加目录、索引或拆分文件 |

---

## 决策规则

```
强信号任一触发？
  ├─ 是 → 必须重构
  └─ 否 → 弱信号 >= 3 个？
              ├─ 是 → 建议重构
              └─ 否 → 继续调研模式
```

---

## 快速检测命令

```bash
# 检查 SKILL.md 文件大小和行数
wc -l skills/workUnits/workflowCaseStudy/skills/*/SKILL.md

# 检查最近更新频率
git log --oneline --since="3 months ago" -- skills/workUnits/workflowCaseStudy/skills/

# 检查冲突历史
git log --oneline --all --merges -- skills/
```
