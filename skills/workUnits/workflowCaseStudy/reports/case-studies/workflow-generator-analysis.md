# workflow-generator å·¥ä½œæµåˆ†ææŠ¥å‘Š

> **åˆ†ææ—¥æœŸ**: 2026-01-11  
> **è¿è¡Œç¼–å·**: #15  
> **åˆ†æè€…**: workflow-case-study Agent

---

## ğŸ“Œ æ ¸å¿ƒå‘ç°

1. **å‘ç°æ–°æ¨¡å¼ã€ŒAgent-to-Agent Delegationã€**ï¼šè½»é‡çº§åè°ƒå™¨ï¼ˆ5 åˆ†é’Ÿï¼‰é€šè¿‡ `update-issue` + `assign-to-agent` å°†å¤æ‚ä»»åŠ¡å§”æ´¾ç»™ä¸“ç”¨ Agentï¼ŒIssue Body æˆä¸ºæŒ‡ä»¤ä¼ é€’åè®®ã€‚
2. **Agent æ–‡ä»¶çš„åŒæ¨¡å¼è®¾è®¡**ï¼š`create-agentic-workflow.agent.md` åŒæ—¶æ”¯æŒ"Issue æ‰¹å¤„ç†æ¨¡å¼"å’Œ"äº¤äº’å¯¹è¯æ¨¡å¼"ï¼Œå…±äº«èƒ½åŠ›ä½†æ‰§è¡Œä¸åŒé€»è¾‘è·¯å¾„ã€‚
3. **å…ƒå·¥ä½œæµå¯ç¤º**ï¼šè¿™æ˜¯"ç”Ÿæˆå·¥ä½œæµçš„å·¥ä½œæµ"ï¼Œæ­ç¤ºäº† gh-aw çš„è‡ªä¸¾èƒ½åŠ›â€”â€”ç”¨ Agent åˆ›å»º Agentã€‚

---

## ğŸ¯ ç ”ç©¶åŠ¨æœº

**é€‰æ‹©ç†ç”±**: 
- `workflow-generator` æ˜¯**å…ƒç¼–ç¨‹å·¥ä½œæµ**â€”â€”ç”Ÿæˆå·¥ä½œæµçš„å·¥ä½œæµï¼Œèƒ½æ­ç¤º gh-aw çš„æ ¸å¿ƒè®¾è®¡æ¨¡å¼
- ç›´æ¥åŒ¹é…ç ”ç©¶è®®ç¨‹ P1 ä¸»é¢˜ã€ŒAgent åä½œæ¨¡å¼ã€
- å¯éªŒè¯ H003ï¼ˆpatterns/ ç›®å½•ï¼‰å’Œæ¢ç´¢ P2ã€Œè‡ªé€‚åº”å·¥ä½œæµã€

**ç ”ç©¶é—®é¢˜**:
1. å·¥ä½œæµç”Ÿæˆå·¥ä½œæµæ—¶ï¼Œå¦‚ä½•ä¼ é€’è®¾è®¡çŸ¥è¯†ï¼Ÿ
2. å¤š Agent é—´å¦‚ä½•åè°ƒâ€”â€”åè°ƒå™¨å’Œæ‰§è¡Œè€…å¦‚ä½•åˆ†å·¥ï¼Ÿ
3. gh-aw çš„"è‡ªä¸¾"èƒ½åŠ›è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ

---

## ğŸ“Š åˆ†ææ‘˜è¦

| ç»´åº¦ | é…ç½® | è¯„ä¼° |
|------|------|------|
| è§¦å‘æ–¹å¼ | `issues: opened` + `lock-for-agent: true` | â­â­â­ æ˜ç¡®åœºæ™¯ï¼Œé˜²å¹¶å‘ |
| æƒé™è®¾è®¡ | `contents: read, issues: read, pull-requests: read` | â­â­â­ æœ€å°æƒé™ï¼Œå†™æ“ä½œèµ° safe-outputs |
| å·¥å…·ç»„åˆ | `github.toolsets: [default]` | â­â­â­ æ ‡å‡†é…ç½® |
| è¶…æ—¶è®¾ç½® | `5 åˆ†é’Ÿ` | â­â­â­ åè°ƒå™¨è½»é‡åŒ–ï¼Œå¿«é€Ÿå“åº” |
| è¿‡æ»¤æ¡ä»¶ | `if: startsWith(github.event.issue.title, '[Workflow]')` | â­â­â­ ç²¾å‡†è§¦å‘ |
| Safe-outputs | `update-issue` + `assign-to-agent` | â­â­â­â­ å…³é”®åˆ›æ–°ç‚¹ |

---

## ğŸ¨ è¯†åˆ«çš„è®¾è®¡æ¨¡å¼

### å·²çŸ¥æ¨¡å¼

| æ¨¡å¼åç§° | åº”ç”¨æ–¹å¼ | ç‰¹åˆ«ä¹‹å¤„ |
|---------|---------|---------|
| **Coordinator-Executor Pattern** | 5 åˆ†é’Ÿåè°ƒå™¨ + Agent æ‰§è¡Œè€… | é¦–æ¬¡çœ‹åˆ°ä½¿ç”¨ `assign-to-agent` å®ç° |
| **Lock-for-Agent Pattern** | `lock-for-agent: true` | æ ‡å‡†åº”ç”¨ï¼Œé˜²æ­¢å¹¶å‘å¤„ç† |
| **Dual-Mode Agent Pattern** | Agent æ–‡ä»¶æœ‰ Mode 1 å’Œ Mode 2 | é¦–æ¬¡çœ‹åˆ°å®Œæ•´çš„"Issue Form Mode + Interactive Mode"è®¾è®¡ |

### ğŸ†• æ–°å‘ç°æ¨¡å¼

#### Agent-to-Agent Delegation Pattern â­â­â­â­â­â­â­â­

**è¯†åˆ«ç‰¹å¾**:
- åè°ƒå™¨å·¥ä½œæµä½¿ç”¨ `safe-outputs: { update-issue: ..., assign-to-agent: }` ç»„åˆ
- Issue Body è¢«ç”¨ä½œ"æŒ‡ä»¤æ–‡æ¡£"â€”â€”åè°ƒå™¨ Append ç»“æ„åŒ–æŒ‡ä»¤ï¼Œæ‰§è¡Œè€…è§£ææŒ‡ä»¤
- Agent æ–‡ä»¶ï¼ˆ`.agent.md`ï¼‰å®šä¹‰æ‰§è¡Œé€»è¾‘ï¼Œæ”¯æŒåŒæ¨¡å¼

**è®¾è®¡æ„å›¾**:
- **è§£è€¦åè°ƒä¸æ‰§è¡Œ**ï¼šåè°ƒå™¨åªåšè°ƒåº¦å’Œä¸Šä¸‹æ–‡å‡†å¤‡ï¼ˆ5 åˆ†é’Ÿï¼‰ï¼Œæ‰§è¡Œè€…ä¸“æ³¨ä»»åŠ¡ï¼ˆæ— é™åˆ¶ï¼‰
- **Issue ä½œä¸ºå¥‘çº¦**ï¼šIssue Body æˆä¸ºåè°ƒå™¨å’Œæ‰§è¡Œè€…ä¹‹é—´çš„é€šä¿¡åè®®
- **å¯è¿½æº¯æ€§**ï¼šæ‰€æœ‰æŒ‡ä»¤å’Œä¸Šä¸‹æ–‡éƒ½è®°å½•åœ¨ Issue ä¸­ï¼Œä¾¿äºè°ƒè¯•å’Œå®¡è®¡

**å…¸å‹æµç¨‹**:
```
ç”¨æˆ·åˆ›å»º Issue â†’ åè°ƒå™¨æ•è· â†’ æ›´æ–° Issue (Append æŒ‡ä»¤) â†’ è®¾ç½®çŠ¶æ€ â†’ assign-to-agent â†’ æ‰§è¡Œè€…æ¥ç®¡
```

**å¯å¤ç”¨åœºæ™¯**:
- å¤æ‚ä»»åŠ¡çš„é¢„å¤„ç†+æ‰§è¡Œåˆ†ç¦»
- éœ€è¦äººæœºåä½œçš„å·¥ä½œæµï¼ˆäººç±»æä¾›è¾“å…¥ï¼ŒAI æ‰§è¡Œï¼‰
- ä»»åŠ¡è·¯ç”±å™¨ï¼ˆæ ¹æ® Issue å†…å®¹åˆ†æ´¾ç»™ä¸åŒ Agentï¼‰

---

#### Issue-as-Protocol Pattern â­â­â­â­â­â­

**è¯†åˆ«ç‰¹å¾**:
- ä½¿ç”¨ `update-issue.body:` å‘ Issue Body Append ç»“æ„åŒ–å†…å®¹
- Append å†…å®¹åŒ…å«æ˜ç¡®çš„"AI Agent Instructions"ç« èŠ‚
- å†…å®¹æ ¼å¼åŒ–ä¸º Markdownï¼Œå¯è¢«åç»­ Agent è§£æ

**è®¾è®¡æ„å›¾**:
- **æŒä¹…åŒ–é€šä¿¡**ï¼šIssue Body æ˜¯æŒä¹…åŒ–çš„ï¼Œä¸ä¼šä¸¢å¤±
- **äººæœºå¯è¯»**ï¼šäººç±»å’Œ AI éƒ½èƒ½ç†è§£æŒ‡ä»¤
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šIssue å†å²è®°å½•æ‰€æœ‰å˜æ›´

**æ¥æº**: workflow-generator (update-issue safe output)

---

## ğŸ’» å¯å¤ç”¨ç‰‡æ®µ

### åè°ƒå™¨ + Agent å§”æ´¾æ¨¡æ¿

```yaml
# ç”¨é€”: è½»é‡çº§åè°ƒå™¨å§”æ´¾ä»»åŠ¡ç»™ Agent
description: <ä»»åŠ¡æè¿°>
on:
  issues:
    types: [opened]
    lock-for-agent: true
  reaction: "eyes"
permissions:
  contents: read
  issues: read
if: startsWith(github.event.issue.title, '[<PREFIX>]')
safe-outputs:
  update-issue:
    status:
    body:
    target: "${{ github.event.issue.number }}"
  assign-to-agent:
timeout-minutes: 5
---
# åè°ƒå™¨ Prompt
1. æ›´æ–° Issue çŠ¶æ€ä¸º "In progress"
2. Append è¯¦ç»†æŒ‡ä»¤åˆ° Issue Body
3. ä½¿ç”¨ assign-to-agent å§”æ´¾ç»™ Agent
```

### Issue Body ç»“æ„åŒ–æŒ‡ä»¤æ¨¡æ¿

```markdown
---

## ğŸ¤– AI Agent Instructions

This issue has been assigned to an AI agent. The agent will:

1. **Parse requirements** from the fields above
2. **Generate output** following guidelines
3. **Create deliverable** (PR/Comment/etc.)

**IMPORTANT**: [ç‰¹å®šçº¦æŸè¯´æ˜]

**Best Practices Applied**: [å®‰å…¨å’Œè´¨é‡è¦æ±‚]

**Next Steps**: [æœŸæœ›è¡Œä¸º]
```

---

## ğŸ¤” æ‰¹åˆ¤æ€§åˆ†æ

### è®¾è®¡äº®ç‚¹

1. **æè‡´çš„å…³æ³¨ç‚¹åˆ†ç¦»**ï¼šåè°ƒå™¨åªåšè°ƒåº¦ï¼ˆ5 åˆ†é’Ÿï¼‰ï¼Œä¸åšå®é™…å·¥ä½œï¼›æ‰§è¡Œè€…ä¸“æ³¨ä»»åŠ¡ï¼Œä¸å…³å¿ƒè§¦å‘é€»è¾‘
2. **è‡ªæ–‡æ¡£åŒ–**ï¼šæ‰€æœ‰æŒ‡ä»¤éƒ½å†™åœ¨ Issue ä¸­ï¼Œç”¨æˆ·å¯è§ã€å¯ç†è§£ã€å¯ç¼–è¾‘
3. **åŒæ¨¡å¼å¤ç”¨**ï¼šAgent æ–‡ä»¶åŒæ—¶æ”¯æŒè‡ªåŠ¨åŒ–å’Œäº¤äº’å¼ï¼Œé¿å…ä»£ç é‡å¤
4. **å®‰å…¨è®¾è®¡**ï¼šåè°ƒå™¨åªè¯»æƒé™ + safe-outputsï¼Œæ‰§è¡Œè€…é€šè¿‡ Agent æ–‡ä»¶æ§åˆ¶èƒ½åŠ›è¾¹ç•Œ

### æ”¹è¿›å»ºè®®

1. **ç¼ºå°‘é”™è¯¯å¤„ç†**ï¼šå¦‚æœ `assign-to-agent` å¤±è´¥ä¼šæ€æ ·ï¼Ÿåº”è¯¥æœ‰å›é€€æœºåˆ¶
2. **æŒ‡ä»¤ç¡¬ç¼–ç **ï¼šAppend çš„æŒ‡ä»¤å†™åœ¨ Prompt ä¸­ï¼Œä¸å¤Ÿçµæ´»â€”â€”å¯ä»¥è€ƒè™‘ä»æ¨¡æ¿æ–‡ä»¶å¯¼å…¥
3. **ç¼ºå°‘éªŒè¯**ï¼šæ²¡æœ‰æ£€æŸ¥ Issue æ ¼å¼æ˜¯å¦ç¬¦åˆé¢„æœŸ

---

## ğŸ”— ä¸çŒœæƒ³åº“çš„å…³ç³»

### H003 (patterns/ ç›®å½•) - æ–°è¯æ®

è™½ç„¶ workflow-generator æœ¬èº«æ²¡æœ‰ä½¿ç”¨ repo-memory/patterns/ï¼Œä½†å®ƒå¼•ç”¨çš„ `create-agentic-workflow.agent.md` å±•ç¤ºäº†**çŸ¥è¯†æ²‰æ·€çš„å¦ä¸€ç§å½¢å¼**â€”â€”Agent æ–‡ä»¶ã€‚

**æ–°æ´å¯Ÿ**ï¼šçŸ¥è¯†æ²‰æ·€ä¸åªæ˜¯ patterns/ ç›®å½•ï¼Œè¿˜åŒ…æ‹¬ï¼š
- `shared/` ç›®å½•ï¼ˆMCP é…ç½®ã€é€šç”¨ç‰‡æ®µï¼‰
- `.agent.md` æ–‡ä»¶ï¼ˆAgent è¡Œä¸ºå®šä¹‰ï¼‰
- Issue Bodyï¼ˆè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼‰

### æå‡ºæ–°çŒœæƒ³ H006

**H006: Agent æ–‡ä»¶æ˜¯å¯æ‰§è¡ŒçŸ¥è¯†çš„æ²‰æ·€å½¢å¼**
- Agent æ–‡ä»¶ï¼ˆ`.agent.md`ï¼‰å°è£…äº†å¤æ‚ä»»åŠ¡çš„æ‰§è¡Œé€»è¾‘
- ä¸ patterns/ å­˜å‚¨"é—®é¢˜æ¨¡å¼"ä¸åŒï¼ŒAgent æ–‡ä»¶å­˜å‚¨"è§£å†³æ–¹æ¡ˆæ¨¡å¼"
- éœ€è¦éªŒè¯ï¼šå…¶ä»–å¤æ‚å·¥ä½œæµæ˜¯å¦éƒ½ä½¿ç”¨ Agent æ–‡ä»¶åˆ†ç¦»é€»è¾‘ï¼Ÿ

---

## ğŸ“ Skill æ›´æ–°å»ºè®®

- [x] workflowAnalyzer/patterns/COORDINATION.md: æ·»åŠ  "Agent-to-Agent Delegation Pattern"
- [x] workflowAnalyzer/patterns/UX.md: æ·»åŠ  "Issue-as-Protocol Pattern"
- [ ] hypothesis/HYPOTHESES.md: æ·»åŠ  H006
- [ ] hypothesis/hypotheses/H006-agent-files-as-knowledge.md: åˆ›å»ºçŒœæƒ³è¯¦æƒ…

---

## ğŸ”® åç»­ç ”ç©¶æ–¹å‘

1. **æ‰«æå…¶ä»– `.agent.md` æ–‡ä»¶**ï¼šç¡®è®¤ Agent æ–‡ä»¶æ¨¡å¼çš„æ™®éæ€§
2. **ç ”ç©¶ Agent æ–‡ä»¶çš„åŒæ¨¡å¼è®¾è®¡**ï¼šæ˜¯å¦æ‰€æœ‰ Agent éƒ½æ”¯æŒï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ
3. **æ¢ç´¢ assign-to-agent çš„è¾¹ç•Œ**ï¼šèƒ½å¦é“¾å¼å§”æ´¾ï¼ˆAgent å†å§”æ´¾ Agentï¼‰ï¼Ÿ
4. **å¯¹æ¯” Campaign æ¶æ„**ï¼šAgent å§”æ´¾ vs Campaign ç¼–æ’ï¼Œå„é€‚ç”¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ
