# GitHub Webhook 中控服务器密钥 (请勿提交到 Git)
# 创建时间: 2025-12-31
# 更新时间: 2026-01-01

# ==================== 服务器连接 ====================
SERVER_IP=193.112.183.143
SSH_PORT=22
SSH_USER=ubuntu
SSH_KEY=C:\Users\Administrator\.ssh\tencent-agent.pem

# 快速连接命令:
# ssh -i "$SSH_KEY" -p $SSH_PORT $SSH_USER@$SERVER_IP
# 实际命令: ssh -i "C:\Users\Administrator\.ssh\tencent-agent.pem" -p 22 ubuntu@193.112.183.143

# ==================== Webhook 服务 ====================
WEBHOOK_PORT=19527
WEBHOOK_SECRET=c9e398677799473e9d082a66ff0b0cd6
SERVICE_PATH=/opt/webhook/

# 服务管理: sudo systemctl start|stop|restart|status webhook
# 日志查看: sudo journalctl -u webhook -f

# ==================== 防火墙说明 ====================
# 端口 19527 的防火墙策略：
#
# 【当前配置】服务器本地 iptables 全放行，由腾讯云安全组控制访问
# 更新时间: 2026-01-01
#
# 【iptables 配置】
# 服务器上存在 GITHUB_WEBHOOK 链，专门处理 19527 端口流量：
#   sudo iptables -L GITHUB_WEBHOOK -n -v
#
# 当前规则: ACCEPT all (全放行)
# 如需限制访问，可添加 GitHub IP 白名单：
#   192.30.252.0/22, 185.199.108.0/22, 140.82.112.0/20, 143.55.64.0/20
#
# 【修改 iptables 规则】
# 全放行: sudo iptables -F GITHUB_WEBHOOK && sudo iptables -A GITHUB_WEBHOOK -j ACCEPT
# 保存规则: sudo netfilter-persistent save
#
# 【测试连通性】
# 本地测试: Test-NetConnection 193.112.183.143 -Port 19527
# 服务器测试: curl http://localhost:19527/health

# ==================== GitHub Secrets 配置 ====================
# 需要在 GitHub 仓库 Settings → Secrets 中配置:
# - WEBHOOK_URL: http://$SERVER_IP:$WEBHOOK_PORT/webhook
# - CALLBACK_URL: http://$SERVER_IP:$WEBHOOK_PORT/callback
# - CALLBACK_SECRET: (与服务器 .env 中 CALLBACK_SECRET 一致)
