# éšæœºæ•°ä¸æ¦‚ç‡ç³»ç»Ÿ - æ¨¡å—ç´¢å¼•
# Probability System Index
# ç‰ˆæœ¬: 1.0
# æ›´æ–°æ—¥æœŸ: 2026-01-05

æœ¬ç›®å½•åŒ…å«å®Œæ•´çš„éšæœºæ•°ä¸æ¦‚ç‡ç³»ç»Ÿå®ç°ï¼Œå…±5å±‚æ¶æ„ï¼Œ18ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œä»¥åŠå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ã€‚

## å¿«é€Ÿå¯¼èˆª

- [æ¨¡å—æ¦‚è§ˆ](#æ¨¡å—æ¦‚è§ˆ) - æŸ¥çœ‹æ‰€æœ‰18ä¸ªæ¨¡å—
- [æµ‹è¯•å¥—ä»¶](#æµ‹è¯•å¥—ä»¶) - æŸ¥çœ‹æµ‹è¯•æ–‡æ¡£ï¼ˆæ–°å¢ï¼‰
- [ä½¿ç”¨å»ºè®®](#ä½¿ç”¨å»ºè®®) - å¿«é€Ÿå¼€å§‹æŒ‡å—
- [ç³»ç»Ÿç‰¹æ€§](#ç³»ç»Ÿç‰¹æ€§) - åŠŸèƒ½ç‰¹æ€§è¯´æ˜

## æµ‹è¯•å¥—ä»¶

**ğŸ“ Tests/** - å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œç”¨äºéªŒè¯åŠŸèƒ½å’Œå®šä½é—®é¢˜

| æ–‡ä»¶ | è¯´æ˜ | æµ‹è¯•æ•°é‡ |
|------|------|---------|
| [ProbabilityTests.verse](Tests/ProbabilityTests.verse) | å•å…ƒæµ‹è¯•å¥—ä»¶ | 12ä¸ªæµ‹è¯• |
| [IntegrationTests.verse](Tests/IntegrationTests.verse) | é›†æˆæµ‹è¯•å¥—ä»¶ | 4ä¸ªåœºæ™¯æµ‹è¯• |
| [README.md](Tests/README.md) | æµ‹è¯•æ–‡æ¡£å’Œé—®é¢˜å®šä½æŒ‡å— | - |

**æµ‹è¯•è¦†ç›–**:
- âœ… åŸºç¡€åŠŸèƒ½æµ‹è¯•ï¼ˆéšæœºæ•°èŒƒå›´ã€æ¦‚ç‡åˆ†å¸ƒï¼‰
- âœ… åŠ æƒé€‰æ‹©åˆ†å¸ƒéªŒè¯
- âœ… PRDæœºåˆ¶æµ‹è¯•ï¼ˆé€’å¢ã€é‡ç½®ï¼‰
- âœ… ä¿åº•æœºåˆ¶æµ‹è¯•ï¼ˆç¡¬ä¿åº•ã€è½¯ä¿åº•ï¼‰
- âœ… è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆç©ºæ•°ç»„ã€æç«¯å€¼ï¼‰
- âœ… æ€§èƒ½æµ‹è¯•ï¼ˆå¤§é‡æ“ä½œï¼‰
- âœ… é›†æˆæµ‹è¯•ï¼ˆè£…å¤‡æ‰è½ã€æŠ½å¡ã€æš´å‡»ã€äº‹ä»¶ï¼‰

**å¿«é€Ÿè¿è¡Œæµ‹è¯•**:
```verse
using { /YourProject/Probability/Tests/ProbabilityTests }
using { /YourProject/Probability/Tests/IntegrationTests }

# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
ProbabilityTests.RunAllTests()

# è¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
IntegrationTests.RunAllIntegrationTests()
```

è¯¦ç»†æµ‹è¯•æ–‡æ¡£å’Œé—®é¢˜å®šä½æŒ‡å—è¯·å‚è€ƒ [Tests/README.md](Tests/README.md)

## æ¨¡å—æ¦‚è§ˆ

### ç¬¬ä¸€å±‚ï¼šåŸºç¡€è®¾æ–½å±‚ (Foundation Layer)

#### 1. RngCore.verse - éšæœºæ•°ç”Ÿæˆå™¨æ ¸å¿ƒ
- **åŠŸèƒ½**: æä¾›åŸºç¡€éšæœºæ•°ç”Ÿæˆèƒ½åŠ›
- **ä¸»è¦ç±»**:
  - `random_generator` - éšæœºæ•°ç”Ÿæˆå™¨ç±»
- **ä¸»è¦å‡½æ•°**:
  - `CreateGenerator()` - åˆ›å»ºç”Ÿæˆå™¨
  - `QuickInt()`, `QuickFloat()` - å¿«æ·éšæœºæ•°ç”Ÿæˆ

#### 2. SeedControl.verse - ç§å­æ§åˆ¶ç³»ç»Ÿ
- **åŠŸèƒ½**: ç®¡ç†éšæœºæ•°ç§å­ï¼ˆæ¦‚å¿µå±‚ï¼‰
- **ä¸»è¦ç±»**:
  - `seed_manager` - ç§å­ç®¡ç†å™¨
- **ä¸»è¦å‡½æ•°**:
  - `CreateSeedManager()` - åˆ›å»ºç®¡ç†å™¨
  - `GenerateSeedFromString()` - ä»å­—ç¬¦ä¸²ç”Ÿæˆç§å­å“ˆå¸Œ

#### 3. Distribution.verse - éšæœºåˆ†å¸ƒå‡½æ•°
- **åŠŸèƒ½**: å®ç°å¤šç§æ¦‚ç‡åˆ†å¸ƒ
- **åŒ…å«åˆ†å¸ƒ**:
  - å‡åŒ€åˆ†å¸ƒã€æ­£æ€åˆ†å¸ƒã€ä¸‰è§’åˆ†å¸ƒ
  - æŒ‡æ•°åˆ†å¸ƒã€ä¼½é©¬åˆ†å¸ƒã€è´å¡”åˆ†å¸ƒ
  - æ³Šæ¾åˆ†å¸ƒã€å‡ ä½•åˆ†å¸ƒã€äºŒé¡¹åˆ†å¸ƒ
  - å¸•ç´¯æ‰˜åˆ†å¸ƒã€å¯¹æ•°æ­£æ€åˆ†å¸ƒã€æŸ¯è¥¿åˆ†å¸ƒã€éŸ¦å¸ƒå°”åˆ†å¸ƒ

### ç¬¬äºŒå±‚ï¼šé€‰æ‹©å™¨å±‚ (Selectors Layer)

#### 4. UniformSelector.verse - å‡åŒ€éšæœºé€‰æ‹©å™¨
- **åŠŸèƒ½**: æä¾›å‡åŒ€åˆ†å¸ƒçš„éšæœºé€‰æ‹©
- **ä¸»è¦ç±»**:
  - `uniform_selector` - å‡åŒ€é€‰æ‹©å™¨ç±»
- **ä¸»è¦å‡½æ•°**:
  - `SelectRandomItem()` - ä»æ•°ç»„éšæœºé€‰æ‹©
  - `SelectRandomItems()` - é€‰æ‹©å¤šä¸ªä¸é‡å¤

#### 5. WeightedSelector.verse - åŠ æƒéšæœºé€‰æ‹©å™¨
- **åŠŸèƒ½**: æŒ‰æƒé‡è¿›è¡Œéšæœºé€‰æ‹©
- **ä¸»è¦ç±»**:
  - `weighted_selector` - åŠ æƒé€‰æ‹©å™¨
  - `weighted_item` - åŠ æƒé€‰é¡¹
- **ä¸»è¦å‡½æ•°**:
  - `SelectWeightedItem()` - å¿«é€ŸåŠ æƒé€‰æ‹©

#### 6. NonRepeatSelector.verse - æ— é‡å¤éšæœºé€‰æ‹©å™¨
- **åŠŸèƒ½**: ç¡®ä¿ä¸è¿ç»­é‡å¤é€‰æ‹©
- **ä¸»è¦ç±»**:
  - `non_repeat_selector` - æ— é‡å¤é€‰æ‹©å™¨
  - `weighted_non_repeat_selector` - åŠ æƒæ— é‡å¤é€‰æ‹©å™¨

#### 7. Shuffler.verse - æ´—ç‰Œå™¨
- **åŠŸèƒ½**: å®ç°å„ç§æ´—ç‰Œå’Œæ’åˆ—ç®—æ³•
- **ä¸»è¦ç±»**:
  - `deck_shuffler` - ç‰Œå †ç®¡ç†å™¨
- **ä¸»è¦å‡½æ•°**:
  - `ShuffleArray()` - Fisher-Yatesæ´—ç‰Œ
  - `GeneratePermutation()` - ç”Ÿæˆéšæœºæ’åˆ—

### ç¬¬ä¸‰å±‚ï¼šæ¦‚ç‡æœºåˆ¶å±‚ (Probability Mechanisms Layer)

#### 8. SimpleChance.verse - ç®€å•æ¦‚ç‡åˆ¤å®š
- **åŠŸèƒ½**: åŸºç¡€æ¦‚ç‡åˆ¤å®šåŠŸèƒ½
- **ä¸»è¦ç±»**:
  - `chance_roller` - æ¦‚ç‡åˆ¤å®šå™¨
- **ä¸»è¦å‡½æ•°**:
  - `RollChance()` - æ¦‚ç‡åˆ¤å®š
  - `RollPercent()` - ç™¾åˆ†æ¯”åˆ¤å®š
  - `RollDice()` - æ·éª°å­

#### 9. PseudoRandomDistribution.verse - ä¼ªéšæœºåˆ†å¸ƒç³»ç»Ÿ
- **åŠŸèƒ½**: å®ç°PRDç®—æ³•ï¼Œå‡å°‘è¿æ°”æ³¢åŠ¨
- **ä¸»è¦ç±»**:
  - `prd_roller` - PRDåˆ¤å®šå™¨
  - `prd_with_cap` - å¸¦ä¸Šé™çš„PRD
  - `weighted_prd` - åŠ æƒPRD
- **ä¸»è¦å‡½æ•°**:
  - `CreatePRDRoller()` - åˆ›å»ºPRDç³»ç»Ÿ
  - `CalculatePRDIncrement()` - è®¡ç®—PRDå¢é‡

#### 10. PitySystem.verse - ä¿åº•æœºåˆ¶
- **åŠŸèƒ½**: å®ç°æ¸¸æˆä¿åº•ç³»ç»Ÿ
- **ä¸»è¦ç±»**:
  - `pity_counter` - åŸºç¡€ä¿åº•
  - `soft_pity` - è½¯ä¿åº•ç³»ç»Ÿ
  - `double_pity` - åŒä¿åº•ç³»ç»Ÿ
- **ä¸»è¦å‡½æ•°**:
  - `CreatePityCounter()` - åˆ›å»ºä¿åº•è®¡æ•°å™¨
  - `CreateSoftPity()` - åˆ›å»ºè½¯ä¿åº•

#### 11. ProbabilityModifier.verse - æ¦‚ç‡è¡°å‡/é€’å¢ç³»ç»Ÿ
- **åŠŸèƒ½**: åŠ¨æ€æ¦‚ç‡è°ƒæ•´
- **ä¸»è¦ç±»**:
  - `probability_decay` - æ¦‚ç‡è¡°å‡
  - `probability_boost` - æ¦‚ç‡é€’å¢
  - `linear_boost` - çº¿æ€§é€’å¢
  - `cyclic_probability` - å‘¨æœŸæ€§æ¦‚ç‡
  - `adaptive_probability` - è‡ªé€‚åº”æ¦‚ç‡

### ç¬¬å››å±‚ï¼šæ¸¸æˆåº”ç”¨å±‚ (Game Applications Layer)

#### 12. LootTable.verse - æ‰è½è¡¨ç³»ç»Ÿ
- **åŠŸèƒ½**: å®ç°æ¸¸æˆæ‰è½ç³»ç»Ÿ
- **ä¸»è¦ç±»**:
  - `loot_table` - åŸºç¡€æ‰è½è¡¨
  - `tiered_loot_table` - åˆ†å±‚æ‰è½è¡¨
  - `guaranteed_loot_table` - ä¿åº•æ‰è½è¡¨
- **ä¸»è¦å‡½æ•°**:
  - `CreateLootTable()` - åˆ›å»ºæ‰è½è¡¨

#### 13. GachaSystem.verse - æŠ½å¡ç³»ç»Ÿ
- **åŠŸèƒ½**: å®Œæ•´çš„æŠ½å¡ç³»ç»Ÿ
- **ä¸»è¦ç±»**:
  - `gacha_pool` - å¡æ± ç³»ç»Ÿ
  - `gacha_pool_config` - å¡æ± é…ç½®
  - `gacha_card` - å¡ç‰Œå®šä¹‰
- **ä¸»è¦å‡½æ•°**:
  - `CreateGachaPool()` - åˆ›å»ºå¡æ± 

#### 14. CriticalHit.verse - æš´å‡»ç³»ç»Ÿ
- **åŠŸèƒ½**: æ¸¸æˆæš´å‡»æœºåˆ¶
- **ä¸»è¦ç±»**:
  - `crit_calculator` - åŸºç¡€æš´å‡»
  - `multi_crit_calculator` - å¤šé‡æš´å‡»
  - `prd_crit_calculator` - PRDæš´å‡»
- **ä¸»è¦å‡½æ•°**:
  - `CreateCritCalculator()` - åˆ›å»ºæš´å‡»è®¡ç®—å™¨

#### 15. RandomEvents.verse - éšæœºäº‹ä»¶ç³»ç»Ÿ
- **åŠŸèƒ½**: æ¸¸æˆéšæœºäº‹ä»¶è§¦å‘
- **ä¸»è¦ç±»**:
  - `event_manager` - äº‹ä»¶ç®¡ç†å™¨
  - `timed_event_manager` - å®šæ—¶äº‹ä»¶ç®¡ç†å™¨
  - `event_chain` - é“¾å¼äº‹ä»¶
- **ä¸»è¦å‡½æ•°**:
  - `CreateEventManager()` - åˆ›å»ºäº‹ä»¶ç®¡ç†å™¨

### ç¬¬äº”å±‚ï¼šè°ƒè¯•ä¸åˆ†æå±‚ (Debug & Analytics Layer)

#### 16. ProbabilityValidator.verse - æ¦‚ç‡éªŒè¯å™¨
- **åŠŸèƒ½**: éªŒè¯æ¦‚ç‡ç³»ç»Ÿæ­£ç¡®æ€§
- **ä¸»è¦ç±»**:
  - `probability_validator` - éªŒè¯å™¨
  - `distribution_stats` - åˆ†å¸ƒç»Ÿè®¡
  - `frequency_analyzer` - é¢‘ç‡åˆ†æ
- **ä¸»è¦å‡½æ•°**:
  - `ValidateSimpleProbability()` - éªŒè¯ç®€å•æ¦‚ç‡
  - `ValidateWeightedSelection()` - éªŒè¯åŠ æƒé€‰æ‹©

#### 17. DistributionVisualizer.verse - åˆ†å¸ƒå¯è§†åŒ–
- **åŠŸèƒ½**: ç”Ÿæˆåˆ†å¸ƒæ•°æ®çš„ç»Ÿè®¡æ‘˜è¦
- **ä¸»è¦ç±»**:
  - `histogram` - ç›´æ–¹å›¾
  - `bucket_analyzer` - åˆ†æ¡¶åˆ†æ
  - `time_series` - æ—¶é—´åºåˆ—
- **ä¸»è¦å‡½æ•°**:
  - `CreateHistogram()` - åˆ›å»ºç›´æ–¹å›¾
  - `CalculateSummary()` - è®¡ç®—æ‘˜è¦ç»Ÿè®¡

#### 18. RandomLogger.verse - éšæœºæ—¥å¿—ç³»ç»Ÿ
- **åŠŸèƒ½**: è®°å½•å’Œè¿½è¸ªéšæœºäº‹ä»¶
- **ä¸»è¦ç±»**:
  - `random_logger` - æ—¥å¿—å™¨
  - `probability_tracker` - æ¦‚ç‡è¿½è¸ªå™¨
  - `performance_analyzer` - æ€§èƒ½åˆ†æå™¨
- **ä¸»è¦å‡½æ•°**:
  - `CreateLogger()` - åˆ›å»ºæ—¥å¿—å™¨
  - `CreateTracker()` - åˆ›å»ºè¿½è¸ªå™¨

## ä½¿ç”¨å»ºè®®

### å¿«é€Ÿå¼€å§‹

1. **åŸºç¡€éšæœº**: ä½¿ç”¨ `RandomUtils.verse` æˆ– `RngCore.verse`
2. **æ¦‚ç‡åˆ¤å®š**: ä½¿ç”¨ `SimpleChance.verse`
3. **åŠ æƒé€‰æ‹©**: ä½¿ç”¨ `WeightedSelector.verse`
4. **æ‰è½ç³»ç»Ÿ**: ä½¿ç”¨ `LootTable.verse`
5. **æŠ½å¡ç³»ç»Ÿ**: ä½¿ç”¨ `GachaSystem.verse`

### é«˜çº§åŠŸèƒ½

1. **PRDæœºåˆ¶**: ä½¿ç”¨ `PseudoRandomDistribution.verse` å‡å°‘è¿æ°”æ³¢åŠ¨
2. **ä¿åº•ç³»ç»Ÿ**: ä½¿ç”¨ `PitySystem.verse` å®ç°ç©å®¶ä¿æŠ¤
3. **åŠ¨æ€æ¦‚ç‡**: ä½¿ç”¨ `ProbabilityModifier.verse` å®ç°è‡ªé€‚åº”éš¾åº¦
4. **è°ƒè¯•åˆ†æ**: ä½¿ç”¨ `ProbabilityValidator.verse` å’Œ `RandomLogger.verse`

### ç»„åˆä½¿ç”¨ç¤ºä¾‹

```verse
# ç¤ºä¾‹ï¼šåˆ›å»ºå¸¦PRDçš„æš´å‡»ç³»ç»Ÿ
using { /YourProject/Probability/CriticalHit }
using { /YourProject/Probability/PseudoRandomDistribution }

my_crit_system := CreatePRDCritCalculator(0.25, 2.0)  # 25%æš´å‡»ç‡ï¼Œ2å€ä¼¤å®³
result := my_crit_system.CalculateDamage(100.0)
```

## ç³»ç»Ÿç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

- 18ä¸ªå®Œæ•´çš„æ¨¡å—
- 5å±‚æ¶æ„è®¾è®¡
- 70+ ç±»å®šä¹‰
- 200+ å…¬å…±å‡½æ•°
- å®Œæ•´çš„ç±»å‹æ³›å‹æ”¯æŒ
- è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š

### ğŸ¯ è®¾è®¡åŸåˆ™

1. **æ¨¡å—åŒ–**: æ¯å±‚ç‹¬ç«‹ï¼Œå¯å•ç‹¬ä½¿ç”¨
2. **å¯æ‰©å±•**: æ³›å‹è®¾è®¡ï¼Œæ”¯æŒè‡ªå®šä¹‰ç±»å‹
3. **æ˜“ç”¨æ€§**: æä¾›å¿«æ·å‡½æ•°å’Œé»˜è®¤é…ç½®
4. **å¯è°ƒè¯•**: å®Œæ•´çš„æ—¥å¿—å’ŒéªŒè¯ç³»ç»Ÿ

### ğŸ“Š åº”ç”¨åœºæ™¯

- æ‰è½ç³»ç»Ÿï¼ˆè£…å¤‡ã€ææ–™ï¼‰
- æŠ½å¡ç³»ç»Ÿï¼ˆè§’è‰²ã€æ­¦å™¨ï¼‰
- æˆ˜æ–—ç³»ç»Ÿï¼ˆæš´å‡»ã€é—ªé¿ï¼‰
- éšæœºäº‹ä»¶ï¼ˆå¤©æ°”ã€é­é‡ï¼‰
- ç¨‹åºç”Ÿæˆï¼ˆåœ°å›¾ã€å…³å¡ï¼‰

## ä¾èµ–å…³ç³»

```
ç¬¬äº”å±‚ï¼ˆè°ƒè¯•ï¼‰
    â†“ ä½¿ç”¨
ç¬¬å››å±‚ï¼ˆåº”ç”¨ï¼‰
    â†“ ä½¿ç”¨
ç¬¬ä¸‰å±‚ï¼ˆæœºåˆ¶ï¼‰
    â†“ ä½¿ç”¨
ç¬¬äºŒå±‚ï¼ˆé€‰æ‹©å™¨ï¼‰
    â†“ ä½¿ç”¨
ç¬¬ä¸€å±‚ï¼ˆåŸºç¡€ï¼‰
    â†“ ä¾èµ–
Verseæ ‡å‡†åº“ï¼ˆ/Verse.org/Random, /Verse.org/Verseï¼‰
```

## æ€§èƒ½è€ƒè™‘

1. **å†…å­˜ç®¡ç†**: æ‰€æœ‰å†å²è®°å½•éƒ½æœ‰å¤§å°é™åˆ¶
2. **è®¡ç®—ä¼˜åŒ–**: æƒé‡å’Œæ¦‚ç‡ä¼šç¼“å­˜
3. **é¿å…é‡å¤è®¡ç®—**: æä¾›é¢„è®¡ç®—çš„å¸¸é‡
4. **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡æ·»åŠ å’Œå¤„ç†

## æ³¨æ„äº‹é¡¹

âš ï¸ **Verseè¯­è¨€é™åˆ¶**:
- ä¸æ”¯æŒçœŸæ­£çš„éšæœºç§å­æ§åˆ¶
- å­—ç¬¦ä¸²æ“ä½œåŠŸèƒ½æœ‰é™
- æ²¡æœ‰å†…ç½®çš„æ’åºå‡½æ•°

ğŸ’¡ **æœ€ä½³å®è·µ**:
- ä½¿ç”¨æ³›å‹ç±»æ—¶æ˜ç¡®æŒ‡å®šç±»å‹
- å¤§é‡æ•°æ®å¤„ç†æ—¶æ³¨æ„å†å²è®°å½•é™åˆ¶
- è°ƒè¯•æ—¶å¯ç”¨æ—¥å¿—ç³»ç»Ÿ
- ç”Ÿäº§ç¯å¢ƒå…³é—­è¯¦ç»†æ—¥å¿—ä»¥æå‡æ€§èƒ½

## ç‰ˆæœ¬å†å²

- v1.0 (2026-01-05): åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´çš„5å±‚æ¶æ„å®ç°

## è´¡çŒ®è€…

- åŸºäºä½“ç³»è§„åˆ’è®¾è®¡æ–‡æ¡£å®ç°
- ä½¿ç”¨ UEFN/Verse æœ€ä½³å®è·µ

## è®¸å¯è¯

éµå¾ªé¡¹ç›®ä¸»è®¸å¯è¯
