# Phase 4: 交付 (Deliver)

> **职责**：提交工作，确保可追溯
> 
> **时间预算**：3-5 分钟

---

## 你要回答的问题

**我的工作怎么交付出去？**

---

## Step 4.1: 检查交付物完整性

根据执行模式检查：

### 研究模式

- [ ] 分析报告写完了？
- [ ] 工作日志记录了？
- [ ] 猜想库更新了？（如有新证据）
- [ ] 能力边界更新了？（如有新发现）

### 重构模式

- [ ] 重构完成了？
- [ ] 索引和引用更新了？
- [ ] 重构日志记录了？

### 跳过模式

- [ ] 跳过原因记录了？

**缺任何一项，返回 Phase 3 补完。**

---

## Step 4.2: 提交到正确分支

回顾 Phase 1 的 PR 状态：

| Phase 1 结果 | 操作 |
|--------------|------|
| 有现有 PR | `push_to_pull_request_branch`，推送到已有分支 |
| 没有现有 PR | `create_pull_request`，创建新 PR |

### 创建新 PR 时

- 标题前缀：`[workflow-study] ` 或 `[skills-refactor] `
- 标签：`gh-aw-research`
- 描述：简要说明本次工作

---

## Step 4.3: 在 PR 上添加评论

使用 `add_comment`，总结本次运行：

```markdown
## 🔬 Run #${{ github.run_number }} 完成

**模式**: {研究 | 重构 | 跳过}
**目标**: {目标名称}

**主要发现**:
- {发现1}
- {发现2}

**变更文件**:
- `{file1}`
- `{file2}`

**猜想更新**: {更新了哪个猜想，或提出了新猜想，或无更新}
```

---

## Step 4.4: 确认闭环

输出 PR 链接，确认任务完成。

```
✅ 任务完成
PR: {pr_url}
```

---

## 完成标准

| 检查项 | 必须 |
|--------|------|
| PR 创建/更新成功 | ✅ |
| 评论已添加 | ✅ |
| 所有变更已推送 | ✅ |

**没有 PR 链接 = 任务失败。**
